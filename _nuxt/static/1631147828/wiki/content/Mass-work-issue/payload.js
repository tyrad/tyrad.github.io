__NUXT_JSONP__("/wiki/content/Mass-work-issue", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an){return {data:[{},{article:{slug:O,title:P,layout:"page",date:Q,collection:R,toc:[],body:{type:"root",children:[{type:b,tag:q,props:{},children:[{type:a,value:"1). wkwebview中的iframe中发现iframe的cookie丢失,测试发现"},{type:b,tag:r,props:{},children:[]},{type:a,value:"\n- 钉钉app中打开不会丢失 ✅"},{type:b,tag:r,props:{},children:[]},{type:a,value:"\n- 微信中打开会丢失 ❎"},{type:b,tag:r,props:{},children:[]},{type:a,value:"\n- safari中同样丢失 ❎, 但设置中开启允许跨域追踪后，发现不会丢失 ✅"},{type:b,tag:r,props:{},children:[]},{type:a,value:"\n- iOS13上设置"},{type:b,tag:m,props:{},children:[{type:a,value:"HTTPCookieStorage.shared.cookieAcceptPolicy = .always"}]},{type:a,value:"发现不丢失?"}]},{type:a,value:g},{type:b,tag:q,props:{},children:[{type:a,value:"2). "},{type:b,tag:m,props:{},children:[{type:a,value:"lazy var"}]},{type:a,value:"  deinit  造成程序奔溃"},{type:b,tag:r,props:{},children:[]},{type:a,value:"\n- 例如deinit中调用未初始化的webview，webview设置已经销毁的controller为代理，可能造成野指针问题"},{type:b,tag:r,props:{},children:[]},{type:a,value:"\n- 可以添加标识，来表示懒加载的变量是否加载。(思考:是否有更优雅的方式)"}]},{type:a,value:g},{type:b,tag:q,props:{},children:[{type:a,value:"3). 支付宝支付 "},{type:b,tag:m,props:{},children:[{type:a,value:"AlipaySDK.defaultService()?.payOrder(..., fromScheme: .., callback: {}"}]},{type:a,value:"中callback的回调,根据"},{type:b,tag:A,props:{href:"https:\u002F\u002Fopendocs.alipay.com\u002Fopen\u002F59\u002F103660",rel:[B,C,D],target:E},children:[{type:a,value:"文档"}]},{type:a,value:"。 callback只在未安装支付宝app时进行回调。如果安装支付宝，则需要在"},{type:b,tag:m,props:{},children:[{type:a,value:"func application(_ app: UIApplication, open url: URL, options: [UIApplication.OpenURLOptionsKey : Any] = [:]) -\u003E Bool"}]},{type:a,value:"方法或者scen方法中进行处理(iOS9),可notification通知其他页面刷新。"}]},{type:a,value:g},{type:b,tag:q,props:{},children:[{type:a,value:"4). block形式通知(Notification)的是否需要deinit中销毁。"},{type:b,tag:A,props:{href:"https:\u002F\u002Fswift.gg\u002F2018\u002F07\u002F26\u002Fnotificationcenter-removeobserver\u002F",rel:[B,C,D],target:E},children:[{type:a,value:"建议销毁"}]}]},{type:a,value:g},{type:b,tag:F,props:{className:[G]},children:[{type:b,tag:H,props:{className:[I,S]},children:[{type:b,tag:m,props:{},children:[{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"private"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"var"}]},{type:a,value:" observer"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,s]},children:[{type:a,value:"Any"}]},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"?"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:J}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:"observer "},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:v}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,s]},children:[{type:a,value:T}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:"addObserver"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"forName"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,s]},children:[{type:a,value:"Notification"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:"Name"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:V},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,s]},children:[{type:a,value:"AppNotificationName"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:"alipaySuccess"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:V},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:" object"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,W]},children:[{type:a,value:X}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:" queue"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,s]},children:[{type:a,value:"OperationQueue"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:"main"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"noti"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"in"}]},{type:a,value:"\n        \n"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002Fremove "}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,s]},children:[{type:a,value:T}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:"removeObserver"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"observer"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:q,props:{},children:[{type:a,value:"5). 使用runtime绑定NSNumber类型的变量,如果用"},{type:b,tag:m,props:{},children:[{type:a,value:Y}]},{type:a,value:",32bit的设备会崩溃"},{type:b,tag:m,props:{},children:[{type:a,value:"\u002F-[CFNumber retain]: message sent to deallocated instance 0x16dc3350"}]},{type:a,value:"。 需要使用"},{type:b,tag:m,props:{},children:[{type:a,value:Y}]},{type:a,value:",详情见"},{type:b,tag:A,props:{href:"https:\u002F\u002Fwww.jianshu.com\u002Fp\u002F6490f74e3d6a",rel:[B,C,D],target:E},children:[{type:a,value:"运行时绑定NSNumber类型传参Crash"}]}]},{type:a,value:g},{type:b,tag:F,props:{className:[G]},children:[{type:b,tag:H,props:{className:[I,"language-java"]},children:[{type:b,tag:m,props:{},children:[{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"static"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"const"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:Z}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:_}]},{type:a,value:"k_pop_tag "},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:v}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:"&"}]},{type:a,value:"k_pop_tag"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:"\n\n"},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:Z}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:"setJk_popTag"},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:ab},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:ac}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:_}]},{type:a,value:"number "},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:v}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:K}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:K}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:ac}]},{type:a,value:" alloc"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:L}]},{type:a,value:"initWithInteger"},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:n}]},{type:a,value:ab},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:L}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002Fobjc_setAssociatedObject(self, k_pop_tag, number, OBJC_ASSOCIATION_ASSIGN);"}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:"objc_setAssociatedObject"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:J},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:" number"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:" OBJC_ASSOCIATION_RETAIN"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002Fget"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,z]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:"jk_popTag"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"\u002F\u002F-[CFNumber retain]: message sent to deallocated instance 0x16dc3350"}]},{type:a,value:"\n    id  o "},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:v}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:"objc_getAssociatedObject"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:J},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"if"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"o"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:w}]},{type:a,value:"\n        "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ae}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:K}]},{type:a,value:"o integerValue"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:L}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:ae}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,"number"]},children:[{type:a,value:"0"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:u}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:x}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:q,props:{},children:[{type:a,value:"6). 某个view的frame转换到相对window的frame"}]},{type:a,value:g},{type:b,tag:F,props:{className:[G]},children:[{type:b,tag:H,props:{className:[I,S]},children:[{type:b,tag:m,props:{},children:[{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"let"}]},{type:a,value:" tgFrame "},{type:b,tag:c,props:{className:[d,i]},children:[{type:a,value:v}]},{type:a,value:" cell"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,t]},children:[{type:a,value:"convert"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"cell"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:"bounds"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:o}]},{type:a,value:" to"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:n}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,W]},children:[{type:a,value:X}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:l}]},{type:a,value:g}]}]}]}]},dir:"\u002Fwiki\u002FiOS-G2\u002FMass",path:af,extension:".md",createdAt:ag,updatedAt:ag},prev:{slug:ah,title:ai,date:aj},next:{slug:ak,title:al,date:am},scrollTop:an,sideCategory:[{folderName:"iOS-G2",articles:[{slug:"appclip-preview-1",date:"2020-10-13 09:17:29 +8000",title:"App Clips 简介",path:"\u002Fwiki\u002FiOS-G2\u002Fappclip-preview-1"},{slug:"iOS-G2-(译)wkwebview一些tips",title:"(译)wkwebview一些tips",date:"2020-06-16T00:00:00.000Z",path:"\u002Fwiki\u002FiOS-G2\u002FiOS-G2-(译)wkwebview一些tips"},{slug:"iOS-G2-telegram-iOS源码分析-1",title:"telegram-iOS源码分析-启动",date:"2020-04-23T00:00:00.000Z",path:"\u002Fwiki\u002FiOS-G2\u002FiOS-G2-telegram-iOS源码分析-1"},{slug:"iOS-G2-(转)WKWebView 那些坑",title:"(转)bugly WKWebView 那些坑",date:M,path:"\u002Fwiki\u002FiOS-G2\u002FiOS-G2-(转)WKWebView 那些坑"}],children:[{folderName:"AppClip",articles:[{slug:"AppClip-AppClip-note1",title:"AppClip笔记（一）",date:"2020-09-30T00:00:00.000Z",path:"\u002Fwiki\u002FiOS-G2\u002FAppClip\u002FAppClip-AppClip-note1"},{slug:"AppClip-一些关于AppClips的笔记",date:"2020-10-26T08:10:45.000Z",title:"一些关于AppClips的笔记(转载)",path:"\u002Fwiki\u002FiOS-G2\u002FAppClip\u002FAppClip-一些关于AppClips的笔记"}],children:[]},{folderName:"Debug",articles:[{slug:"Debug-DEBUG环境变量以及环境状态区分",title:"DEBUG环境变量以及环境状态区分",date:N,path:"\u002Fwiki\u002FiOS-G2\u002FDebug\u002FDebug-DEBUG环境变量以及环境状态区分"},{slug:"Debug-swift-test",title:"单元测试和UI测试",date:N,path:"\u002Fwiki\u002FiOS-G2\u002FDebug\u002FDebug-swift-test"}],children:[]},{folderName:"GCD",articles:[{slug:ak,title:al,date:am,path:"\u002Fwiki\u002FiOS-G2\u002FGCD\u002FGCD-(转)信号量"}],children:[]},{folderName:R,articles:[{slug:"Mass-ms-IQKeyboard-dissmiss-black",title:"IQKeyboard dissmiss黑边问题",date:M,path:"\u002Fwiki\u002FiOS-G2\u002FMass\u002FMass-ms-IQKeyboard-dissmiss-black"},{slug:"Mass-ms-URLProtocolDemo",title:"WkWebview+URLProtocol",date:M,path:"\u002Fwiki\u002FiOS-G2\u002FMass\u002FMass-ms-URLProtocolDemo"},{slug:ah,title:ai,date:aj,path:"\u002Fwiki\u002FiOS-G2\u002FMass\u002FMass-ms-env"},{slug:"Mass-swift-url-encoding",title:"swift url编码问题（CharacterSet使用）",date:"2020-05-25T00:00:00.000Z",path:"\u002Fwiki\u002FiOS-G2\u002FMass\u002FMass-swift-url-encoding"},{slug:O,title:P,date:Q,path:af}],children:[]},{folderName:"UICollectionView",articles:[{slug:"UICollectionView-UICollectionView自适应高度",date:"2020-10-23T05:31:37.000Z",title:"UICollectionView自适应高度(autolayout)",path:"\u002Fwiki\u002FiOS-G2\u002FUICollectionView\u002FUICollectionView-UICollectionView自适应高度"}],children:[]},{folderName:"UIView",articles:[{slug:"UIView-uiview-shadow",title:"UIView圆角阴影",date:N,path:"\u002Fwiki\u002FiOS-G2\u002FUIView\u002FUIView-uiview-shadow"}],children:[]}]}]}],fetch:{},mutations:an}}("text","element","span","token","punctuation"," ","\n","keyword","operator",".","(",")","code",":",",","\n    ","p","br","builtin","function",";","=","{","}","comment","class-name","a","nofollow","noopener","noreferrer","_blank","div","nuxt-content-highlight","pre","line-numbers","self","[","]","2020-05-03T00:00:00.000Z","2020-08-14T00:00:00.000Z","Mass-work-issue","mess issue","2020-05-07T00:00:00.000Z","Mass","language-swift","NotificationCenter","default","rawValue","constant","nil","OBJC_ASSOCIATION_RETAIN","void","*","-","NSInteger","popTag","NSNumber"," k_pop_tag","return","\u002Fwiki\u002FiOS-G2\u002FMass\u002FMass-work-issue","2021-09-09T00:36:13.928Z","Mass-ms-env","sandboxReceipt","2020-05-06T00:00:00.000Z","GCD-(转)信号量","(转)GCD信号量","2020-05-18T00:00:00.000Z",void 0)));