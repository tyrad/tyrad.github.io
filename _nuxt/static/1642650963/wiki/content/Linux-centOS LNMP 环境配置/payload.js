__NUXT_JSONP__("/wiki/content/Linux-centOS%20LNMP%20%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au){return {data:[{},{article:{slug:L,title:M,layout:"page",date:z,toc:[{id:N,depth:s,text:O},{id:A,depth:s,text:A},{id:B,depth:s,text:B},{id:P,depth:s,text:Q},{id:R,depth:s,text:S},{id:T,depth:s,text:U},{id:C,depth:s,text:C}],body:{type:"root",children:[{type:b,tag:e,props:{},children:[{type:a,value:"环境:"}]},{type:a,value:c},{type:b,tag:h,props:{className:[i]},children:[{type:b,tag:j,props:{className:[k,V]},children:[{type:b,tag:g,props:{},children:[{type:b,tag:d,props:{className:[f,m]},children:[{type:a,value:"["}]},{type:a,value:"chen"},{type:b,tag:d,props:{className:[f,"variable"]},children:[{type:a,value:"@centos"}]},{type:b,tag:d,props:{className:[f,y]},children:[{type:a,value:D}]},{type:a,value:"linux "},{type:b,tag:d,props:{className:[f,y]},children:[{type:a,value:"\u002F"}]},{type:b,tag:d,props:{className:[f,m]},children:[{type:a,value:"]"}]},{type:a,value:"$ uname "},{type:b,tag:d,props:{className:[f,y]},children:[{type:a,value:D}]},{type:a,value:"a\n"},{type:b,tag:d,props:{className:[f,"constant"]},children:[{type:a,value:W}]},{type:a,value:" centos"},{type:b,tag:d,props:{className:[f,y]},children:[{type:a,value:D}]},{type:a,value:"linux"},{type:b,tag:d,props:{className:[f,m]},children:[{type:a,value:X}]},{type:a,value:"shared "},{type:b,tag:d,props:{className:[f,G]},children:[{type:a,value:"3.10"}]},{type:b,tag:d,props:{className:[f,G]},children:[{type:a,value:".0"}]},{type:b,tag:d,props:{className:[f,y]},children:[{type:a,value:D}]},{type:b,tag:d,props:{className:[f,G]},children:[{type:a,value:"327."}]},{type:a,value:"el7"},{type:b,tag:d,props:{className:[f,m]},children:[{type:a,value:X}]},{type:a,value:"x86_64\n"}]}]}]},{type:a,value:c},{type:b,tag:Y,props:{id:Z},children:[{type:b,tag:n,props:{href:"#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C",ariaHidden:o,tabIndex:p},children:[{type:b,tag:d,props:{className:[q,r]},children:[]}]},{type:a,value:Z}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:b,tag:n,props:{href:"https:\u002F\u002Fwww.mtyun.com\u002Flibrary\u002F21\u002Finitial-setup-with-centos\u002F",rel:[_,$,aa],target:ab},children:[{type:a,value:"转自https:\u002F\u002Fwww.mtyun.com\u002Flibrary\u002F21\u002Finitial-setup-with-centos\u002F"}]}]},{type:a,value:c},{type:b,tag:t,props:{id:N},children:[{type:b,tag:n,props:{href:"#%E6%9B%B4%E6%94%B9root%E5%AF%86%E7%A0%81",ariaHidden:o,tabIndex:p},children:[{type:b,tag:d,props:{className:[q,r]},children:[]}]},{type:a,value:O}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"如果机器上没有绑定密钥，建议您修改服务器的默认登录密码，在登录后执行："}]},{type:a,value:c},{type:b,tag:h,props:{className:[i]},children:[{type:b,tag:j,props:{className:[k,V]},children:[{type:b,tag:g,props:{},children:[{type:a,value:"passwd\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"按照提示输入您的新密码。新密码一定要符合强密码的要求：至少8位以上并且包含数字、字符以及标点。复杂的密码不容易记忆，推荐您使用1Password 或者lastpass等密码管理工具管理您的密码。"}]},{type:a,value:c},{type:b,tag:t,props:{id:A},children:[{type:b,tag:n,props:{href:"#%E5%88%9B%E5%BB%BA%E6%99%AE%E9%80%9A%E7%94%A8%E6%88%B7",ariaHidden:o,tabIndex:p},children:[{type:b,tag:d,props:{className:[q,r]},children:[]}]},{type:a,value:A}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"在日常的服务器管理过程中，您并不需要使用root来登录。最佳实践是创建一个拥有一定权限的普通用户进行日常的操作与维护。"}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"例如创建一个名为chris的普通用户，在终端下输入："}]},{type:a,value:c},{type:b,tag:h,props:{className:[i]},children:[{type:b,tag:j,props:{className:[k,l]},children:[{type:b,tag:g,props:{},children:[{type:a,value:"# 创建一个名为chris的用户\nadduser chris\n# 给chris创建登录密码\npasswd chris\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"同样，普通用户的密码也应当遵循强密码的原则。"}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"设置完密码后就可以使用chris用户名和密码来登录主机了。但是此时chris并没有ROOT的权限，我们通过编辑sudoers文件给chris赋权，在终端执行："}]},{type:a,value:c},{type:b,tag:h,props:{className:[i]},children:[{type:b,tag:j,props:{className:[k,l]},children:[{type:b,tag:g,props:{},children:[{type:a,value:"visudo\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"这个命令使用vi打开了sudoers文件，我们可以通过vi来对这个文件进行编辑。在sudoers的最后一行加入："}]},{type:a,value:c},{type:b,tag:h,props:{className:[i]},children:[{type:b,tag:j,props:{className:[k,l]},children:[{type:b,tag:g,props:{},children:[{type:a,value:"chris    ALL=(ALL)       ALL\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"如果对vi不熟悉，可以按下面的步骤进行操作："}]},{type:a,value:c},{type:b,tag:"ol",props:{},children:[{type:a,value:c},{type:b,tag:E,props:{},children:[{type:a,value:"按G键，跳转到文件末尾；"}]},{type:a,value:c},{type:b,tag:E,props:{},children:[{type:a,value:"按o键，新插入一行并进入编辑模式；"}]},{type:a,value:c},{type:b,tag:E,props:{},children:[{type:a,value:"输入"},{type:b,tag:g,props:{},children:[{type:a,value:"chris ALL=(ALL) ALL"}]},{type:a,value:"；"}]},{type:a,value:c},{type:b,tag:E,props:{},children:[{type:a,value:"依次按下"},{type:b,tag:g,props:{},children:[{type:a,value:"Esc，:，x，Enter"}]},{type:a,value:"键保存。"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:t,props:{id:B},children:[{type:b,tag:n,props:{href:"#%E5%AE%89%E5%85%A8%E5%8A%A0%E5%9B%BA",ariaHidden:o,tabIndex:p},children:[{type:b,tag:d,props:{className:[q,r]},children:[]}]},{type:a,value:B}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"如果您的云主机只有内网IP，则不需要执行此步骤。对于有外网IP的云主机，建议您执行此步骤，以加强您的云主机的安全，减少密码被爆破的风险。"}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"拥有外网IP的服务器默认使用了22端口作为ssh服务的端口，这个端口成为入侵者重点关注的突破口。"}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"我们可以对ssh服务进行配置，通过修改ssh服务的默认监端口址、禁止root登录等手段，加强云主机的安全性。我们使用刚刚创建的chris账号登录云主机，登录后执行："}]},{type:a,value:c},{type:b,tag:h,props:{className:[i]},children:[{type:b,tag:j,props:{className:[k,l]},children:[{type:b,tag:g,props:{},children:[{type:a,value:"vi \u002Fetc\u002Fssh\u002Fsshd_config\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"在打开的配置文件末尾输入以下内容，其中Port您可以自行设置："}]},{type:a,value:c},{type:b,tag:h,props:{className:[i]},children:[{type:b,tag:j,props:{className:[k,l]},children:[{type:b,tag:g,props:{},children:[{type:a,value:"Port 10022\nProtocol 2\nPermitRootLogin no\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"保存后退出，然后reload ssh服务，使配置生效："}]},{type:a,value:c},{type:b,tag:h,props:{className:[i]},children:[{type:b,tag:j,props:{className:[k,l]},children:[{type:b,tag:g,props:{},children:[{type:a,value:"service sshd reload\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"当再次登录云主机时，您需要在配置文件中指定的Port参数："}]},{type:a,value:c},{type:b,tag:h,props:{className:[i]},children:[{type:b,tag:j,props:{className:[k,l]},children:[{type:b,tag:g,props:{},children:[{type:a,value:"ssh -p 10022 chris@211.155.92.230\n"}]}]}]},{type:a,value:c},{type:b,tag:Y,props:{id:"lnmp"},children:[{type:b,tag:n,props:{href:"#lnmp",ariaHidden:o,tabIndex:p},children:[{type:b,tag:d,props:{className:[q,r]},children:[]}]},{type:a,value:"LNMP"}]},{type:a,value:c},{type:b,tag:t,props:{id:P},children:[{type:b,tag:n,props:{href:"#%E5%AE%89%E8%A3%85nginx",ariaHidden:o,tabIndex:p},children:[{type:b,tag:d,props:{className:[q,r]},children:[]}]},{type:a,value:Q}]},{type:a,value:c},{type:b,tag:h,props:{className:[i]},children:[{type:b,tag:j,props:{className:[k,u]},children:[{type:b,tag:g,props:{},children:[{type:b,tag:d,props:{className:[f,v]},children:[{type:a,value:"#nginx不在官方源里。 "}]},{type:a,value:c},{type:b,tag:d,props:{className:[f,v]},children:[{type:a,value:"#需要先 `yum install epel-release`.否则会提示`No package nginx available.``"}]},{type:a,value:"\nyum "},{type:b,tag:d,props:{className:[f,w]},children:[{type:a,value:H}]},{type:a,value:" epel-release \n"},{type:b,tag:d,props:{className:[f,v]},children:[{type:a,value:"#更新源"}]},{type:a,value:"\nyum update\n"},{type:b,tag:d,props:{className:[f,v]},children:[{type:a,value:"#安装nginx  "}]},{type:a,value:c},{type:b,tag:d,props:{className:[f,w]},children:[{type:a,value:F}]},{type:a,value:ac},{type:b,tag:d,props:{className:[f,w]},children:[{type:a,value:H}]},{type:a,value:" nginx\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"安装完毕后，Nginx的配置文件在\u002Fetc\u002Fnginx目录下。使用以下命令启动Nginx："}]},{type:a,value:c},{type:b,tag:h,props:{className:[i]},children:[{type:b,tag:j,props:{className:[k,u]},children:[{type:b,tag:g,props:{},children:[{type:b,tag:d,props:{className:[f,w]},children:[{type:a,value:F}]},{type:a,value:" systemctl start nginx\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"检查系统中firewalld防火墙服务是否开启，如果已开启，我们需要修改防火墙配置，开启Nginx外网端口访问。"}]},{type:a,value:c},{type:b,tag:h,props:{className:[i]},children:[{type:b,tag:j,props:{className:[k,u]},children:[{type:b,tag:g,props:{},children:[{type:b,tag:d,props:{className:[f,w]},children:[{type:a,value:F}]},{type:a,value:" systemctl status firewalld\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"额外的，关闭防火墙\u002F禁止firewall开机启动(根据需求是否开启)"}]},{type:a,value:c},{type:b,tag:h,props:{className:[i]},children:[{type:b,tag:j,props:{className:[k,u]},children:[{type:b,tag:g,props:{},children:[{type:b,tag:d,props:{className:[f,v]},children:[{type:a,value:"#CentOS 7.0默认使用的是firewall作为防火墙"}]},{type:a,value:"\nsystemctl stop firewalld.service "},{type:b,tag:d,props:{className:[f,v]},children:[{type:a,value:"#停止firewall"}]},{type:a,value:"\nsystemctl disable firewalld.service "},{type:b,tag:d,props:{className:[f,v]},children:[{type:a,value:"#禁止firewall开机启动"}]},{type:a,value:c}]}]}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"如果显示active (running)，则需要调整防火墙规则的配置。"}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"修改"},{type:b,tag:g,props:{},children:[{type:a,value:"\u002Fetc\u002Ffirewalld\u002Fzones\u002Fpublic.xml"}]},{type:a,value:"文件("},{type:b,tag:g,props:{},children:[{type:a,value:"sudo vi \u002Fetc\u002Ffirewalld\u002Fzones\u002Fpublic.xml"}]},{type:a,value:")，在zone一节中增加："}]},{type:a,value:c},{type:b,tag:h,props:{className:[i]},children:[{type:b,tag:j,props:{className:[k,ad]},children:[{type:b,tag:g,props:{},children:[{type:b,tag:d,props:{className:[f,x]},children:[{type:b,tag:d,props:{className:[f,x]},children:[{type:b,tag:d,props:{className:[f,m]},children:[{type:a,value:I}]},{type:a,value:ae}]},{type:b,tag:d,props:{className:[f,m]},children:[{type:a,value:af}]}]},{type:a,value:"\n    ...\n    "},{type:b,tag:d,props:{className:[f,x]},children:[{type:b,tag:d,props:{className:[f,x]},children:[{type:b,tag:d,props:{className:[f,m]},children:[{type:a,value:I}]},{type:a,value:"service"}]},{type:a,value:" "},{type:b,tag:d,props:{className:[f,"attr-name"]},children:[{type:a,value:"name"}]},{type:b,tag:d,props:{className:[f,"attr-value"]},children:[{type:b,tag:d,props:{className:[f,m,"attr-equals"]},children:[{type:a,value:"="}]},{type:b,tag:d,props:{className:[f,m]},children:[{type:a,value:ag}]},{type:a,value:ah},{type:b,tag:d,props:{className:[f,m]},children:[{type:a,value:ag}]}]},{type:b,tag:d,props:{className:[f,m]},children:[{type:a,value:"\u002F\u003E"}]}]},{type:a,value:c},{type:b,tag:d,props:{className:[f,x]},children:[{type:b,tag:d,props:{className:[f,x]},children:[{type:b,tag:d,props:{className:[f,m]},children:[{type:a,value:I}]},{type:a,value:ae}]},{type:b,tag:d,props:{className:[f,m]},children:[{type:a,value:af}]}]},{type:a,value:c}]}]}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"保存后重新加载firewalld服务："}]},{type:a,value:c},{type:b,tag:h,props:{className:[i]},children:[{type:b,tag:j,props:{className:[k,u]},children:[{type:b,tag:g,props:{},children:[{type:b,tag:d,props:{className:[f,w]},children:[{type:a,value:F}]},{type:a,value:" systemctl reload firewalld\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"您可以通过浏览器访问 http:\u002F\u002F\u003CIP地址\u003E 来确定Nginx是否已经启动。"}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"最后将Nginx设置为开机启动："}]},{type:a,value:c},{type:b,tag:h,props:{className:[i]},children:[{type:b,tag:j,props:{className:[k,l]},children:[{type:b,tag:g,props:{},children:[{type:a,value:"sudo systemctl enable nginx.service\n"}]}]}]},{type:a,value:c},{type:b,tag:t,props:{id:R},children:[{type:b,tag:n,props:{href:"#%E5%AE%89%E8%A3%85mysqlmariadb",ariaHidden:o,tabIndex:p},children:[{type:b,tag:d,props:{className:[q,r]},children:[]}]},{type:a,value:S}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"MariaDB是MySQL的一个分支，主要由开源社区进行维护和升级，而MySQL被Oracle收购以后，发展较慢。在CentOS 7的软件仓库中，将MySQL更替为了MariaDB。"}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"我们可以使用yum直接安装MariaDB："}]},{type:a,value:c},{type:b,tag:h,props:{className:[i]},children:[{type:b,tag:j,props:{className:[k,l]},children:[{type:b,tag:g,props:{},children:[{type:a,value:"sudo yum install mariadb-server\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"安装完成之后，执行以下命令重启MariaDB服务："}]},{type:a,value:c},{type:b,tag:h,props:{className:[i]},children:[{type:b,tag:j,props:{className:[k,l]},children:[{type:b,tag:g,props:{},children:[{type:a,value:"sudo systemctl start mariadb\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"MariaDB默认root密码为空，我们需要设置一下，执行脚本："}]},{type:a,value:c},{type:b,tag:h,props:{className:[i]},children:[{type:b,tag:j,props:{className:[k,l]},children:[{type:b,tag:g,props:{},children:[{type:a,value:"sudo \u002Fusr\u002Fbin\u002Fmysql_secure_installation\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"这个脚本会经过一些列的交互问答来进行MariaDB的安全设置。"}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"首先提示输入当前的root密码："}]},{type:a,value:c},{type:b,tag:h,props:{className:[i]},children:[{type:b,tag:j,props:{className:[k,l]},children:[{type:b,tag:g,props:{},children:[{type:a,value:"Enter current password for root (enter for none):\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"初始root密码为空，我们直接敲回车进行下一步。"}]},{type:a,value:c},{type:b,tag:h,props:{className:[i]},children:[{type:b,tag:j,props:{className:[k,l]},children:[{type:b,tag:g,props:{},children:[{type:a,value:"Set root password? [Y\u002Fn]\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"设置root密码，默认选项为Yes，我们直接回车，提示输入密码，在这里设置您的MariaDB的root账户密码。"}]},{type:a,value:c},{type:b,tag:h,props:{className:[i]},children:[{type:b,tag:j,props:{className:[k,l]},children:[{type:b,tag:g,props:{},children:[{type:a,value:"Remove anonymous users? [Y\u002Fn]\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"是否移除匿名用户，默认选项为Yes，建议按默认设置，回车继续。"}]},{type:a,value:c},{type:b,tag:h,props:{className:[i]},children:[{type:b,tag:j,props:{className:[k,l]},children:[{type:b,tag:g,props:{},children:[{type:a,value:"Disallow root login remotely? [Y\u002Fn]\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"是否禁止root用户远程登录？如果您只在本机内访问MariaDB，建议按默认设置，回车继续。 如果您还有其他云主机需要使用root账号访问该数据库，则需要选择n。"}]},{type:a,value:c},{type:b,tag:h,props:{className:[i]},children:[{type:b,tag:j,props:{className:[k,l]},children:[{type:b,tag:g,props:{},children:[{type:a,value:"Remove test database and access to it? [Y\u002Fn]\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"是否删除测试用的数据库和权限？ 建议按照默认设置，回车继续。"}]},{type:a,value:c},{type:b,tag:h,props:{className:[i]},children:[{type:b,tag:j,props:{className:[k,l]},children:[{type:b,tag:g,props:{},children:[{type:a,value:"Reload privilege tables now? [Y\u002Fn]\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"是否重新加载权限表？因为我们上面更新了root的密码，这里需要重新加载，回车。"}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"完成后你会看到Success!的提示，MariaDB的安全设置已经完成。我们可以使用以下命令登录MariaDB："}]},{type:a,value:c},{type:b,tag:h,props:{className:[i]},children:[{type:b,tag:j,props:{className:[k,l]},children:[{type:b,tag:g,props:{},children:[{type:a,value:"mysql -uroot -p\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"按提示输入root密码，就会进入MariaDB的交互界面，说明已经安装成功。"}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"最后我们将MariaDB设置为开机启动。"}]},{type:a,value:c},{type:b,tag:h,props:{className:[i]},children:[{type:b,tag:j,props:{className:[k,l]},children:[{type:b,tag:g,props:{},children:[{type:a,value:"sudo systemctl enable mariadb\n"}]}]}]},{type:a,value:c},{type:b,tag:t,props:{id:T},children:[{type:b,tag:n,props:{href:"#%E5%AE%89%E8%A3%85php",ariaHidden:o,tabIndex:p},children:[{type:b,tag:d,props:{className:[q,r]},children:[]}]},{type:a,value:U}]},{type:a,value:c},{type:b,tag:h,props:{className:[i]},children:[{type:b,tag:j,props:{className:[k,u]},children:[{type:b,tag:g,props:{},children:[{type:a,value:ac},{type:b,tag:d,props:{className:[f,w]},children:[{type:a,value:H}]},{type:a,value:ai}]}]}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"运行或停止："}]},{type:a,value:c},{type:b,tag:h,props:{className:[i]},children:[{type:b,tag:j,props:{className:[k,u]},children:[{type:b,tag:g,props:{},children:[{type:a,value:"systemctl start php-fpm\nsystemctl "},{type:b,tag:d,props:{className:[f,"builtin","class-name"]},children:[{type:a,value:"enable"}]},{type:a,value:ai}]}]}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"查看是否启动:"}]},{type:a,value:c},{type:b,tag:h,props:{className:[i]},children:[{type:b,tag:j,props:{className:[k,l]},children:[{type:b,tag:g,props:{},children:[{type:a,value:"ps -ef | grep php-fpm\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"将php-fpm设置为开机启动："}]},{type:a,value:c},{type:b,tag:h,props:{className:[i]},children:[{type:b,tag:j,props:{className:[k,l]},children:[{type:b,tag:g,props:{},children:[{type:a,value:"sudo systemctl enable php-fpm\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"php安装完成之后，需要设置一下php session的目录："}]},{type:a,value:c},{type:b,tag:h,props:{className:[i]},children:[{type:b,tag:j,props:{className:[k,l]},children:[{type:b,tag:g,props:{},children:[{type:a,value:"sudo mkdir \u002Fvar\u002Flib\u002Fphp\u002Fsession\u002F\nsudo chown -R apache:apache \u002Fvar\u002Flib\u002Fphp\u002Fsession\u002F\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"这时php-fpm已经安装完毕，但是现在需要配置一下Nginx，在\u002Fetc\u002Fnginx\u002Fconf.d目录中新建一个名为php.conf的文件，其内容为："}]},{type:a,value:c},{type:b,tag:h,props:{className:[i]},children:[{type:b,tag:j,props:{className:[k,ad]},children:[{type:b,tag:g,props:{},children:[{type:a,value:"server {\n    listen 8000;\n    # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000\n    #\n    location ~ \\.php$ {\n        root           \u002Fusr\u002Fshare\u002Fphp;\n        fastcgi_pass   127.0.0.1:9000;\n        fastcgi_index  index.php;\n        fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;\n        include        fastcgi_params;\n    }\n}\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"然后执行以下命令使我们的配置生效："}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"sudo service nginx reload\n以上我们配置了Nginx的8000端口用来测试，如果您在美团云控制台创建机器时选择了绑定防火墙，需要检查该防火墙是否允许8000端口，如果不允许的话，您可以在防火墙设置中新增防火墙，并关联到该主机。"}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"我们在\u002Fusr\u002Fshare\u002Fphp目录下新建一个名为phpinfo.php的文件用来展示phpinfo信息，文件内容为："}]},{type:a,value:c},{type:b,tag:h,props:{className:[i]},children:[{type:b,tag:j,props:{className:[k,l]},children:[{type:b,tag:g,props:{},children:[{type:a,value:"\u003C?php echo phpinfo(); ?\u003E\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"我们从浏览器打开 http:\u002F\u002F\u003CIP地址\u003E:8000\u002Fphpinfo.php，您就能看到phpinfo信息了，说明我们php环境已经部署成功."}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"\u002F\u002F\u002F更正："}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"可以通过修改"},{type:b,tag:g,props:{},children:[{type:a,value:"\u002Fetc\u002Fnginx\u002Fnginx.conf"}]},{type:a,value:"配置文件来修改默认的web目录。"}]},{type:a,value:c},{type:a,value:c},{type:b,tag:t,props:{id:C},children:[{type:b,tag:n,props:{href:"#%E5%85%B6%E4%BB%96%E9%80%89%E6%8B%A9",ariaHidden:o,tabIndex:p},children:[{type:b,tag:d,props:{className:[q,r]},children:[]}]},{type:a,value:C}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:b,tag:n,props:{href:"https:\u002F\u002Foneinstack.com\u002Finstall\u002F",rel:[_,$,aa],target:ab},children:[{type:a,value:"oneinstack一键安装包"}]}]}]},dir:"\u002Fwiki\u002FLinux",path:aj,extension:".md",createdAt:ak,updatedAt:ak},prev:{slug:al,title:am,date:an},next:{slug:ao,title:ap,date:z},scrollTop:aq,sideCategory:[{folderName:W,articles:[{slug:"Linux-2019-02-26",title:"(转)AWS ec2使用教程",date:J,path:"\u002Fwiki\u002FLinux\u002FLinux-2019-02-26"},{slug:"Linux-2019-03-06",title:"yum 404问题",date:J,path:"\u002Fwiki\u002FLinux\u002FLinux-2019-03-06"},{slug:"Linux-Apache反向代理到ngrok",title:"Apache反向代理到ngrok",date:"2017-07-18T00:00:00.000Z",path:"\u002Fwiki\u002FLinux\u002FLinux-Apache反向代理到ngrok"},{slug:"Linux-CentOS LAMP 环境配置 + wordpress (阿里云ECS)",title:"CentOS LAMP 环境配置 + wordpress (阿里云ECS)",date:ar,path:"\u002Fwiki\u002FLinux\u002FLinux-CentOS LAMP 环境配置 + wordpress (阿里云ECS)"},{slug:"Linux-CentOS LAMP 配置https",title:"CentOS LAMP 配置https",date:ar,path:"\u002Fwiki\u002FLinux\u002FLinux-CentOS LAMP 配置https"},{slug:"Linux-SSH-Keys",title:"How To Set Up SSH Keys",date:"2017-08-19T16:14:59.000Z",path:"\u002Fwiki\u002FLinux\u002FLinux-SSH-Keys"},{slug:L,title:M,date:z,path:aj},{slug:"Linux-centos-install-config",title:"CentOS装机配置",date:"2020-07-17T00:00:00.000Z",path:"\u002Fwiki\u002FLinux\u002FLinux-centos-install-config"},{slug:"Linux-centos-vue-springbot-env",title:"CentOS环境下打包配置(vue\u002Fspringbot)",date:"2020-03-08T00:00:00.000Z",path:"\u002Fwiki\u002FLinux\u002FLinux-centos-vue-springbot-env"},{slug:"Linux-fabric",title:"fabric部署网站应用",date:"2018-01-13T14:22:40.000Z",path:"\u002Fwiki\u002FLinux\u002FLinux-fabric"},{slug:"Linux-google-cloud-ss",title:"Google Cloud安装SS服务",date:as,path:"\u002Fwiki\u002FLinux\u002FLinux-google-cloud-ss"},{slug:al,title:am,date:an,path:"\u002Fwiki\u002FLinux\u002FLinux-install-ngrok"},{slug:"Linux-install-redis-by-homebrew",title:"homebrew安装redis以及常用命令",date:at,path:"\u002Fwiki\u002FLinux\u002FLinux-install-redis-by-homebrew"},{slug:"Linux-macOS JAVA开发环境配置",title:"macOS JAVA开发环境配置",date:"2016-10-01T17:15:33.000Z",path:"\u002Fwiki\u002FLinux\u002FLinux-macOS JAVA开发环境配置"},{slug:"Linux-macOS上kafka搭建",title:"macOS环境kafka环境搭建[译]",date:"2019-05-28T00:00:00.000Z",path:"\u002Fwiki\u002FLinux\u002FLinux-macOS上kafka搭建"},{slug:"Linux-macOS上搭建RAP环境",title:"macOS上搭建RAP环境",date:au,path:"\u002Fwiki\u002FLinux\u002FLinux-macOS上搭建RAP环境"},{slug:"Linux-macOS同时启动多个tomcat",title:"macOS同时启动多个tomcat",date:au,path:"\u002Fwiki\u002FLinux\u002FLinux-macOS同时启动多个tomcat"},{slug:ao,title:ap,date:z,path:"\u002Fwiki\u002FLinux\u002FLinux-pd-centos-java"},{slug:"Linux-speed-test",title:"测试延迟 tcping、httpstat",date:J,path:"\u002Fwiki\u002FLinux\u002FLinux-speed-test"},{slug:"Linux-su命令提示Authentication failure的解决办法",title:"su命令提示Authentication failure的解决办法",date:"2017-09-13T10:18:11.000Z",path:"\u002Fwiki\u002FLinux\u002FLinux-su命令提示Authentication failure的解决办法"},{slug:"Linux-tomcat配置https自签名证书 && iOS访问https接口",title:"tomcat配置https自签名证书 && iOS访问https接口",date:"2016-12-06 20:08",path:"\u002Fwiki\u002FLinux\u002FLinux-tomcat配置https自签名证书 && iOS访问https接口"},{slug:"Linux-tomcat配置自签名的https",title:"tomcat配置自签名的https.md",date:K,path:"\u002Fwiki\u002FLinux\u002FLinux-tomcat配置自签名的https"},{slug:"Linux-type-speed",title:"打字训练",date:"2019-08-01T00:00:00.000Z",path:"\u002Fwiki\u002FLinux\u002FLinux-type-speed"},{slug:"Linux-vps免密的一些配置",date:"2020-11-11T08:27:38.000Z",title:"Vps免密的一些配置",path:"\u002Fwiki\u002FLinux\u002FLinux-vps免密的一些配置"},{slug:"Linux-yum-aliyun-repo",title:"将yum源更换为国内的阿里云源",date:"2017-07-14T12:57:48.000Z",path:"\u002Fwiki\u002FLinux\u002FLinux-yum-aliyun-repo"}],children:[{folderName:"Docker",articles:[{slug:"Docker-2019-03-07",title:"nginx + php + mysql 环境搭建",date:at,path:"\u002Fwiki\u002FLinux\u002FDocker\u002FDocker-2019-03-07"},{slug:"Docker-Docker基础笔记",title:"Docker基础笔记",date:K,path:"\u002Fwiki\u002FLinux\u002FDocker\u002FDocker-Docker基础笔记"},{slug:"Docker-docker-nginx-how-to-vist-localhost",title:"docker(nginx)内访问宿主机localhost",date:"2019-01-29T10:24:51.000Z",path:"\u002Fwiki\u002FLinux\u002FDocker\u002FDocker-docker-nginx-how-to-vist-localhost"},{slug:"Docker-docker-posgres",title:"docker中使用postgresSQL",date:"2019-05-22T00:00:00.000Z",path:"\u002Fwiki\u002FLinux\u002FDocker\u002FDocker-docker-posgres"},{slug:"Docker-docker-redis",title:"docker中使用redis",date:"2019-05-23T00:00:00.000Z",path:"\u002Fwiki\u002FLinux\u002FDocker\u002FDocker-docker-redis"},{slug:"Docker-docker-spring-boot",title:"springboot项目打包成docker",date:"2019-06-12T00:00:00.000Z",path:"\u002Fwiki\u002FLinux\u002FDocker\u002FDocker-docker-spring-boot"},{slug:"Docker-onlyoffice-usage",title:"OnlyOffice\u002FDocumentServer搭建",date:"2019-01-05T12:20:26.000Z",path:"\u002Fwiki\u002FLinux\u002FDocker\u002FDocker-onlyoffice-usage"}],children:[]},{folderName:"Linux命令",articles:[{slug:"Linux命令-chown和chmod的区别",date:"2020-10-23T07:35:41.000Z",title:"Chown和chmod的区别",path:"\u002Fwiki\u002FLinux\u002FLinux命令\u002FLinux命令-chown和chmod的区别"},{slug:"Linux命令-curl",title:"curl",date:"2017-08-31T20:49:00.000Z",path:"\u002Fwiki\u002FLinux\u002FLinux命令\u002FLinux命令-curl"},{slug:"Linux命令-diff",title:"diff",date:"2017-09-03T21:05:20.000Z",path:"\u002Fwiki\u002FLinux\u002FLinux命令\u002FLinux命令-diff"},{slug:"Linux命令-different-bin-sbin",title:"\u002Fbin,\u002Fsbin,\u002Fusr\u002Fsbin,\u002Fusr\u002Fbin目录区别",date:"2019-01-29T00:00:00.000Z",path:"\u002Fwiki\u002FLinux\u002FLinux命令\u002FLinux命令-different-bin-sbin"},{slug:"Linux命令-linux-alias",title:"alias",date:"2017-07-14T21:19:45.000Z",path:"\u002Fwiki\u002FLinux\u002FLinux命令\u002FLinux命令-linux-alias"},{slug:"Linux命令-nano",title:"nano",date:"2017-08-19T15:28:42.000Z",path:"\u002Fwiki\u002FLinux\u002FLinux命令\u002FLinux命令-nano"},{slug:"Linux命令-passwd",date:"2020-10-26T08:44:41.000Z",title:"Passwd",path:"\u002Fwiki\u002FLinux\u002FLinux命令\u002FLinux命令-passwd"},{slug:"Linux命令-rm",title:"rm递归删除",date:"2018-01-19T08:37:24.000Z",path:"\u002Fwiki\u002FLinux\u002FLinux命令\u002FLinux命令-rm"},{slug:"Linux命令-scp",title:"scp",date:"2017-07-10T22:58:10.000Z",path:"\u002Fwiki\u002FLinux\u002FLinux命令\u002FLinux命令-scp"},{slug:"Linux命令-sed",title:"sed",date:"2017-11-26T15:32:39.000Z",path:"\u002Fwiki\u002FLinux\u002FLinux命令\u002FLinux命令-sed"},{slug:"Linux命令-tail",title:"tail",date:"2017-08-28T09:51:05.000Z",path:"\u002Fwiki\u002FLinux\u002FLinux命令\u002FLinux命令-tail"},{slug:"Linux命令-vim-keycue",title:"vim常用快捷键",date:"2019-01-18T08:41:24.000Z",path:"\u002Fwiki\u002FLinux\u002FLinux命令\u002FLinux命令-vim-keycue"},{slug:"Linux命令-vim",title:"vim",date:"2017-07-14T22:58:10.000Z",path:"\u002Fwiki\u002FLinux\u002FLinux命令\u002FLinux命令-vim"}],children:[]},{folderName:"centos",articles:[{slug:"centos-yum安装提示无可用包",title:"yum安装提示无可用包",date:"2020-05-17T00:00:00.000Z",path:"\u002Fwiki\u002FLinux\u002Fcentos\u002Fcentos-yum安装提示无可用包"}],children:[]},{folderName:ah,articles:[{slug:"nginx-google-cloud-nginx",title:"nginx安装配置(Google Cloud，centos7)",date:as,path:"\u002Fwiki\u002FLinux\u002Fnginx\u002Fnginx-google-cloud-nginx"},{slug:"nginx-nginx-https-config",title:"nginx中的https配置小记",date:"2020-03-07T00:00:00.000Z",path:"\u002Fwiki\u002FLinux\u002Fnginx\u002Fnginx-nginx-https-config"},{slug:"nginx-nginx-setting",title:"nginx相关配置",date:K,path:"\u002Fwiki\u002FLinux\u002Fnginx\u002Fnginx-nginx-setting"}],children:[]},{folderName:"插件工具",articles:[{slug:"插件工具-ServerStatus",title:"安装serverstatus监听服务器状态",date:"2018-03-08T12:30:38.000Z",path:"\u002Fwiki\u002FLinux\u002F插件工具\u002F插件工具-ServerStatus"},{slug:"插件工具-htop",title:"htop",date:"2018-07-22T16:04:52.000Z",path:"\u002Fwiki\u002FLinux\u002F插件工具\u002F插件工具-htop"}],children:[]},{folderName:"搞机",articles:[{slug:"搞机-斐讯n1刷机",title:"斐讯n1刷入armbian记录",date:"2019-04-22T00:00:00.000Z",path:"\u002Fwiki\u002FLinux\u002F搞机\u002F搞机-斐讯n1刷机"}],children:[]}]}]}],fetch:{},mutations:aq}}("text","element","\n","span","p","token","code","div","nuxt-content-highlight","pre","line-numbers","language-text","punctuation","a","true",-1,"icon","icon-link",2,"h2","language-bash","comment","function","tag","operator","2017-07-14T10:51:30.000Z","创建普通用户","安全加固","其他选择","-","li","sudo","number","install","\u003C","2019-02-26T00:00:00.000Z","2018-09-04T13:53:00.000Z","Linux-centOS LNMP 环境配置","centOS LNMP 环境配置","更改root密码","更改ROOT密码","安装nginx","安装Nginx","安装mysqlmariadb","安装MySQL(MariaDB)","安装php","安装PHP","language-ruby","Linux",".","h1","准备工作","nofollow","noopener","noreferrer","_blank"," yum ","language-xml","zone","\u003E","\"","nginx"," php-fpm\n","\u002Fwiki\u002FLinux\u002FLinux-centOS LNMP 环境配置","2022-01-20T03:55:04.519Z","Linux-install-ngrok","ngrok","2017-07-13T18:19:10.000Z","Linux-pd-centos-java","pd安装centOS虚拟机并配置Java环境",void 0,"2017-06-04T00:00:00.000Z","2018-02-28T21:34:42.000Z","2019-03-07T00:00:00.000Z","2017-08-24T10:24:01.000Z")));