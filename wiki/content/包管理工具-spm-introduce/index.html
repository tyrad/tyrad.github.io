<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>MISTJ</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content=""><meta data-n-head="ssr" name="format-detection" content="telephone=no"><link data-n-head="ssr" rel="icon" type="image/png" href="/favicon.ico.png"><link rel="preload" href="/_nuxt/js/runtime.1632404838130.js" as="script"><link rel="preload" href="/_nuxt/js/commons/app.1632404838130.js" as="script"><link rel="preload" href="/_nuxt/js/vendors/app.1632404838130.js" as="script"><link rel="preload" href="/_nuxt/js/app.1632404838130.js" as="script"><link rel="preload" href="/_nuxt/js/pages/wiki.1632404838130.js" as="script"><link rel="preload" href="/_nuxt/js/pages/wiki/content/_slug.1632404838130.js" as="script"><style data-vue-ssr-id="5764bbd8:0 1a114e69:0 5fd7ed67:0 21344d92:0 387be0d0:0 fa7ff0ca:0 1e7bd454:0 36807403:0">.svg-inline--fa,svg:not(:root).svg-inline--fa{overflow:visible}.svg-inline--fa{display:inline-block;font-size:inherit;height:1em;vertical-align:-.125em}.svg-inline--fa.fa-lg{vertical-align:-.225em}.svg-inline--fa.fa-w-1{width:.0625em}.svg-inline--fa.fa-w-2{width:.125em}.svg-inline--fa.fa-w-3{width:.1875em}.svg-inline--fa.fa-w-4{width:.25em}.svg-inline--fa.fa-w-5{width:.3125em}.svg-inline--fa.fa-w-6{width:.375em}.svg-inline--fa.fa-w-7{width:.4375em}.svg-inline--fa.fa-w-8{width:.5em}.svg-inline--fa.fa-w-9{width:.5625em}.svg-inline--fa.fa-w-10{width:.625em}.svg-inline--fa.fa-w-11{width:.6875em}.svg-inline--fa.fa-w-12{width:.75em}.svg-inline--fa.fa-w-13{width:.8125em}.svg-inline--fa.fa-w-14{width:.875em}.svg-inline--fa.fa-w-15{width:.9375em}.svg-inline--fa.fa-w-16{width:1em}.svg-inline--fa.fa-w-17{width:1.0625em}.svg-inline--fa.fa-w-18{width:1.125em}.svg-inline--fa.fa-w-19{width:1.1875em}.svg-inline--fa.fa-w-20{width:1.25em}.svg-inline--fa.fa-pull-left{margin-right:.3em;width:auto}.svg-inline--fa.fa-pull-right{margin-left:.3em;width:auto}.svg-inline--fa.fa-border{height:1.5em}.svg-inline--fa.fa-li{width:2em}.svg-inline--fa.fa-fw{width:1.25em}.fa-layers svg.svg-inline--fa{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0}.fa-layers{display:inline-block;height:1em;position:relative;text-align:center;vertical-align:-.125em;width:1em}.fa-layers svg.svg-inline--fa{transform-origin:center center}.fa-layers-counter,.fa-layers-text{display:inline-block;position:absolute;text-align:center}.fa-layers-text{left:50%;top:50%;transform:translate(-50%,-50%);transform-origin:center center}.fa-layers-counter{background-color:#ff253a;border-radius:1em;box-sizing:border-box;color:#fff;height:1.5em;line-height:1;max-width:5em;min-width:1.5em;overflow:hidden;padding:.25em;right:0;text-overflow:ellipsis;top:0;transform:scale(.25);transform-origin:top right}.fa-layers-bottom-right{bottom:0;right:0;top:auto;transform:scale(.25);transform-origin:bottom right}.fa-layers-bottom-left{bottom:0;left:0;right:auto;top:auto;transform:scale(.25);transform-origin:bottom left}.fa-layers-top-right{right:0;top:0;transform:scale(.25);transform-origin:top right}.fa-layers-top-left{left:0;right:auto;top:0;transform:scale(.25);transform-origin:top left}.fa-lg{font-size:1.33333em;line-height:.75em;vertical-align:-.0667em}.fa-xs{font-size:.75em}.fa-sm{font-size:.875em}.fa-1x{font-size:1em}.fa-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-6x{font-size:6em}.fa-7x{font-size:7em}.fa-8x{font-size:8em}.fa-9x{font-size:9em}.fa-10x{font-size:10em}.fa-fw{text-align:center;width:1.25em}.fa-ul{list-style-type:none;margin-left:2.5em;padding-left:0}.fa-ul>li{position:relative}.fa-li{left:-2em;position:absolute;text-align:center;width:2em;line-height:inherit}.fa-border{border:.08em solid #eee;border-radius:.1em;padding:.2em .25em .15em}.fa-pull-left{float:left}.fa-pull-right{float:right}.fa.fa-pull-left,.fab.fa-pull-left,.fal.fa-pull-left,.far.fa-pull-left,.fas.fa-pull-left{margin-right:.3em}.fa.fa-pull-right,.fab.fa-pull-right,.fal.fa-pull-right,.far.fa-pull-right,.fas.fa-pull-right{margin-left:.3em}.fa-spin{-webkit-animation:fa-spin 2s linear infinite;animation:fa-spin 2s linear infinite}.fa-pulse{-webkit-animation:fa-spin 1s steps(8) infinite;animation:fa-spin 1s steps(8) infinite}@-webkit-keyframes fa-spin{0%{transform:rotate(0)}to{transform:rotate(1turn)}}@keyframes fa-spin{0%{transform:rotate(0)}to{transform:rotate(1turn)}}.fa-rotate-90{transform:rotate(90deg)}.fa-rotate-180{transform:rotate(180deg)}.fa-rotate-270{transform:rotate(270deg)}.fa-flip-horizontal{transform:scaleX(-1)}.fa-flip-vertical{transform:scaleY(-1)}.fa-flip-both,.fa-flip-horizontal.fa-flip-vertical{transform:scale(-1)}:root .fa-flip-both,:root .fa-flip-horizontal,:root .fa-flip-vertical,:root .fa-rotate-180,:root .fa-rotate-270,:root .fa-rotate-90{filter:none}.fa-stack{display:inline-block;height:2em;position:relative;width:2.5em}.fa-stack-1x,.fa-stack-2x{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0}.svg-inline--fa.fa-stack-1x{height:1em;width:1.25em}.svg-inline--fa.fa-stack-2x{height:2em;width:2.5em}.fa-inverse{color:#fff}.sr-only{border:0;clip:rect(0,0,0,0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.sr-only-focusable:active,.sr-only-focusable:focus{clip:auto;height:auto;margin:0;overflow:visible;position:static;width:auto}.svg-inline--fa .fa-primary{fill:currentColor;fill:var(--fa-primary-color,currentColor);opacity:1;opacity:var(--fa-primary-opacity,1)}.svg-inline--fa .fa-secondary{fill:currentColor;fill:var(--fa-secondary-color,currentColor)}.svg-inline--fa .fa-secondary,.svg-inline--fa.fa-swap-opacity .fa-primary{opacity:.4;opacity:var(--fa-secondary-opacity,.4)}.svg-inline--fa.fa-swap-opacity .fa-secondary{opacity:1;opacity:var(--fa-primary-opacity,1)}.svg-inline--fa mask .fa-primary,.svg-inline--fa mask .fa-secondary{fill:#000}.fad.fa-inverse{color:#fff}*,:after,:before{box-sizing:inherit}html{box-sizing:border-box;font-size:62.5%}body{color:#333;margin:0;background-color:#fafafa;font-family:-apple-system,system-ui,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial;text-rendering:optimizelegibility;-webkit-text-size-adjust:100%;-webkit-font-smoothing:antialiased;font-size:1.6em;font-weight:300;line-height:1.8em}@media only screen and (max-width:768px){body{font-size:1.6em;line-height:1.6em}}a{font-weight:300;color:#1565c0;text-decoration:none}a:focus,a:hover{text-decoration:underline}p{margin:2rem 0}h1,h2,h3,h4,h5,h6{font-family:Lato,Helvetica,sans-serif;font-weight:700;color:#000;margin:6.4rem 0 3.2rem}h1{font-size:3.2rem;line-height:3.6rem}@media only screen and (max-width:768px){h1{font-size:3rem;line-height:3.4rem}}h2{font-size:2.8rem;line-height:3.2rem}@media only screen and (max-width:768px){h2{font-size:2.6rem;line-height:3rem}}h3{font-size:2.4rem;line-height:2.8rem}@media only screen and (max-width:768px){h3{font-size:2.2rem;line-height:2.6rem}}h4{font-size:2.2rem;line-height:2.6rem}@media only screen and (max-width:768px){h4{font-size:2rem;line-height:2.4rem}}h5{font-size:2rem;line-height:2.4rem}@media only screen and (max-width:768px){h5{font-size:1.8rem;line-height:2.2rem}}h6{font-size:1.8rem;line-height:2.2rem}@media only screen and (max-width:768px){h6{font-size:1.6rem;line-height:2rem}}b,strong{font-weight:700}.highlight>div,.highlight>pre{margin:0 0 2rem;padding:1rem;border-radius:1rem}pre{display:block;font-family:"Source Code Pro","Lucida Console",monospace;font-size:1.6rem;font-weight:400;line-height:2.6rem;overflow-x:auto;margin:0}pre code{display:inline-block;background-color:inherit;color:inherit}code{font-family:"Source Code Pro","Lucida Console",monospace;font-weight:400;background-color:#e0e0e0;color:#333}blockquote{border-left:2px solid #e0e0e0;padding-left:2rem;line-height:2.2rem;font-weight:400;font-style:italic}td,th{padding:1.6rem}table{border-collapse:collapse}table td,table th{border:2px solid #000}table tr:first-child th{border-top:0}table tr:last-child td{border-bottom:0}table tr td:first-child,table tr th:first-child{border-left:0}table tr td:last-child,table tr th:last-child{border-right:0}img{max-width:100%}figure{text-align:center}.wrapper{display:flex;flex-direction:column;min-height:100vh;width:100%}.container{margin:0 auto;max-width:90rem;width:100%;padding-left:2rem;padding-right:2rem}.fas{font-weight:700}.float-right{float:right}.float-left{float:left}.fab{font-weight:400}.fas{font-weight:900}img.emoji{height:1em;width:1em;margin:0 .05em 0 .1em;vertical-align:-.1em}#tap-to-top{display:none!important;z-index:90;position:fixed;bottom:2em;right:2em;top:auto;left:auto;color:#fafafa;padding:10px 16px;border:1px solid #fafafa;background-color:#333;transition:color .2s ease,border-color .2s ease,background .2s ease,opacity .2s ease}.toc-fixed #tap-to-top{display:inline-block!important}.flex{display:flex}.flex-y-center{display:flex;justify-content:center}.flex-align-center{display:flex;align-items:center}.content{flex:1;display:flex;margin-top:1.6rem;margin-bottom:3.2rem}.content article{width:100%;word-break:break-word;font-size:25.6px;font-size:1.6rem;line-height:1.6}.content article h1,.content article h1 *,.content article h2,.content article h2 *,.content article h3,.content article h3 *,.content article h4,.content article h4 *,.content article h5,.content article h5 *,.content article h6,.content article h6 *{word-break:break-all}.content article header{margin-top:6.4rem;margin-bottom:3.2rem}.content article header h1{font-size:4.2rem;line-height:4.6rem;margin:0}@media only screen and (max-width:768px){.content article header h1{font-size:4rem;line-height:4.4rem}}.content article footer{margin-top:4rem}.content article footer .see-also,.content article footer .see-also h3{margin:3.2rem 0}.content article div,.content article p{-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto}.content article a:hover{background:0 0}.content article img{margin:10px;padding:5px;max-width:100%;background:#fff;border:1px solid #bbb;box-shadow:1px 1px 3px #d4d4d4}.content article blockquote{display:block;position:relative;padding:15px 25px;text-align:left;line-height:inherit}.content article blockquote:before{position:absolute}.content article blockquote *{margin:0;font-size:inherit}.content article table{margin:0 0 1.2em;border:none}.content article table td,.content article table th{border:none}.content article ul{margin:0 0 1.2em;padding:0;list-style:disc}.content article ul li{font-size:inherit;list-style:disc}.content article ul li *{margin:0;text-align:left;text-align:initial}.content article ol{list-style:decimal;margin:0;padding:0}.content article ol li{list-style:decimal}.content article ol li *{margin:0;text-align:left;text-align:initial}.content article li ol,.content article li ul{margin-left:2em}.content article li ul{list-style:circle}.content article .article-center{text-align:center;display:-webkit-box;-webkit-box-align:center;-webkit-box-pack:center;-webkit-box-orient:vertical}.content article .article-center-small{display:inline-flex}.content article .article-center-small img{margin:0;padding:0;border:0;box-shadow:none}.content article .article-nobeautify{margin:0;padding:0;border:0;box-shadow:0 0 0}.content article h1,.content article h2,.content article h3,.content article h4,.content article h5,.content article h6{position:relative;margin-top:1em;margin-bottom:1pc;font-weight:700;line-height:1.4;text-align:left;color:#333}.content article h1{padding-bottom:.3em;font-size:57.6px;font-size:3.6rem;line-height:1.2}.content article h2{padding-bottom:.3em;font-size:44.8px;font-size:2.8rem;line-height:1.225}.content article h3{font-size:38.4px;font-size:2.4rem;line-height:1.43}.content article h4{font-size:32px;font-size:2rem}.content article h5,.content article h6{font-size:25.6px;font-size:1.6rem}.content article h6{color:#777}.content article ol,.content article ul{list-style-type:disc;padding:0 0 0 2em}.content article ol ol,.content article ul ol{list-style-type:lower-roman}.content article ol ol ol,.content article ol ul ol,.content article ul ol ol,.content article ul ul ol{list-style-type:lower-alpha}.content article table{width:100%;overflow:auto;word-break:normal;word-break:keep-all}.content article table tr{background-color:#fff;border-top:1px solid #ccc}.content article table th{font-weight:700}.content article table td,.content article table th{padding:6px 13px;border:1px solid #ddd}.content article blockquote{border-left:4px solid #ddd}.content article strong{font-weight:600!important;color:#000!important}.content article a:active,.content article a:focus,.content article a:hover{color:#4183c4;text-decoration:underline}.content article pre code,.content article pre code *{font-size:15px}.content article li code,.content article p code{border-radius:3px;font-size:90%;line-height:1.2;padding:.1rem .2rem;color:#d73e48;background:#fcf2f2}.content article h1,.content article h2{padding-top:1.7rem;padding-bottom:1.2rem;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAABCAYAAACsXeyTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAFUlEQVQIHWNIS0sr/v//PwMMDzY+ADqMahlW4J91AAAAAElFTkSuQmCC) 0 100% repeat-x}.content article,.content article *,.content article div,.content article p{font-weight:400;line-height:1.8}.content .co-width-2{width:16.7%}.content .co-width-10{width:83.3%}.content .co-width-12{width:100%}.content .container{max-width:90rem}.content #body-wrapper{display:flex}.content .post .post-title{margin-bottom:.75em}.content .post .post-meta .fa{text-align:center;width:1.6rem;margin-left:0;margin-right:.5rem}.content .post .post-meta .date .posted-on,.content .post .post-meta .date .reading-time{margin-left:0;margin-right:1.5rem}@media only screen and (max-width:840px){.content #toc-slider{display:none}.content .body-content{width:100%}}.content figure{margin:0;padding:0}.content figcaption p{text-align:center;font-style:italic;font-size:1.6rem;margin:0}.avatar img{width:20rem;height:auto;border-radius:50%}@media only screen and (max-width:768px){.avatar img{width:10rem}}.list ul{margin:3.2rem 0;list-style:none;padding:0}.list ul li{font-size:1.8rem}@media only screen and (max-width:768px){.list ul li{margin:1.6rem 0}}.list ul li .date{display:inline-block;flex:1;width:20rem;text-align:right;margin-right:3rem}@media only screen and (max-width:768px){.list ul li .date{display:block;text-align:left}}.list ul li .title{font-size:1.8rem;flex:2;color:#333;font-family:Lato,Helvetica,sans-serif;font-weight:700}.list ul li .title:focus,.list ul li .title:hover{color:#1565c0}@media only screen and (min-width:768.1px){.list ul:not(.pagination) li{display:flex}}.centered{display:flex;align-items:center;justify-content:center}.centered .about{text-align:center}.centered .about h1{margin-top:2rem;margin-bottom:.5rem}.centered .about h2{margin-top:1rem;margin-bottom:.5rem;font-size:2.4rem}@media only screen and (max-width:768px){.centered .about h2{font-size:2rem}}.centered .about ul{list-style:none;margin:3rem 0 1rem;padding:0}.centered .about ul li{display:inline-block;position:relative}.centered .about ul li a{color:#333;text-transform:uppercase;margin-left:1rem;margin-right:1rem;font-size:1.6rem}.centered .about ul li a:focus,.centered .about ul li a:hover{color:#1565c0}@media only screen and (max-width:768px){.centered .about ul li a{font-size:1.4rem}}.centered .about ul li a i{font-size:3.2rem}.centered .error{text-align:center}.centered .error h1{margin-top:2rem;margin-bottom:.5rem;font-size:4.6rem}@media only screen and (max-width:768px){.centered .error h1{font-size:3.2rem}}.centered .error h2{margin-top:2rem;margin-bottom:3.2rem;font-size:3.2rem}@media only screen and (max-width:768px){.centered .error h2{font-size:2.8rem}}#toc-slider{position:absolute;margin-left:15px}#TableOfContents{padding-left:12px;border-left:2px solid rgba(88,88,88,.1);overflow:hidden;max-height:calc(100vh - 60px)}#TableOfContents ul li{list-style-type:none;font-size:13px;margin-top:.4rem}#TableOfContents ul{margin-top:.1rem;margin-bottom:.1rem}#TableOfContents li,#TableOfContents ul{margin-left:5px;padding-left:0}#TableOfContents ul ul{margin-left:.6rem}#TableOfContents :hover{overflow:auto}#TableOfContents a{color:#555}#TableOfContents a.highlighted{color:#1565c0}#TableOfContents:hover{overflow:auto}.toc-fixed{position:fixed!important;top:15px;margin-top:0;overflow:hidden;z-index:1}.wiki-content-aside{left:250px;right:0}.wiki-category-aside,.wiki-content-aside{position:fixed;top:0;bottom:0;overflow:auto}.wiki-category-aside{left:0;width:250px;padding-left:10px}.wiki-category-aside a{color:inherit}.wiki-category-aside .navigation{cursor:pointer;padding-top:20px;display:flex;align-items:center;justify-content:center}.wiki-category-aside ul{list-style:none;padding-left:10px}.wiki-category-aside li{list-style:none;margin:10px 15px}.wiki-category-aside li .title{font-size:14px;font-weight:400}.pagination{margin-top:6rem;text-align:center;font-family:Lato,Helvetica,sans-serif}.pagination li{display:inline;text-align:center;font-weight:700}.pagination li span{margin:0;text-align:center;width:3.2rem}.pagination li a{font-weight:300}.pagination li a span{margin:0;text-align:center;width:3.2rem}.footer{width:100%;text-align:center;line-height:2rem;margin-bottom:1rem}.footer a{color:#1565c0}main.colorscheme-dark a{color:#42a5f5}main.colorscheme-dark h1,main.colorscheme-dark h2,main.colorscheme-dark h3,main.colorscheme-dark h4,main.colorscheme-dark h5,main.colorscheme-dark h6{color:#dadada}main.colorscheme-dark code{background-color:#424242;color:#dadada}main.colorscheme-dark pre code{background-color:inherit;color:inherit}main.colorscheme-dark blockquote{border-left:2px solid #424242}main.colorscheme-dark table td,main.colorscheme-dark table th{border:2px solid #dadada}main.colorscheme-dark blockquote{border-left:4px solid #424242}main.colorscheme-dark #TableOfContents a{color:#dadada}main.colorscheme-dark #TableOfContents a.highlighted{color:#79aae6}@media (prefers-color-scheme:dark){main.colorscheme-auto{color:#dadada;background-color:#212121}main.colorscheme-auto a{color:#42a5f5}main.colorscheme-auto h1,main.colorscheme-auto h2,main.colorscheme-auto h3,main.colorscheme-auto h4,main.colorscheme-auto h5,main.colorscheme-auto h6{color:#dadada}main.colorscheme-auto code{background-color:#424242;color:#dadada}main.colorscheme-auto pre code{background-color:inherit;color:inherit}main.colorscheme-auto blockquote{border-left:2px solid #424242}main.colorscheme-auto table td,main.colorscheme-auto table th{border:2px solid #dadada}main.colorscheme-auto blockquote{border-left:4px solid #424242}main.colorscheme-auto #TableOfContents a{color:#dadada}main.colorscheme-auto #TableOfContents a.highlighted{color:#79aae6}}main.colorscheme-dark{color:#dadada;background-color:#212121}main.colorscheme-dark .content article strong{color:#dadada!important}main.colorscheme-dark .content .list ul li .title{color:#dadada}main.colorscheme-dark .content .list ul li .title:focus,main.colorscheme-dark .content .list ul li .title:hover{color:#42a5f5}main.colorscheme-dark .content .centered .about ul li a{color:#dadada}main.colorscheme-dark .content .centered .about ul li a:focus,main.colorscheme-dark .content .centered .about ul li a:hover{color:#42a5f5}@media (prefers-color-scheme:dark){main.colorscheme-auto{color:#dadada;background-color:#212121}main.colorscheme-auto .content article strong{color:#dadada!important}main.colorscheme-auto .content .list ul li .title{color:#dadada}main.colorscheme-auto .content .list ul li .title:focus,main.colorscheme-auto .content .list ul li .title:hover{color:#42a5f5}main.colorscheme-auto .content .centered .about ul li a{color:#dadada}main.colorscheme-auto .content .centered .about ul li a:focus,main.colorscheme-auto .content .centered .about ul li a:hover{color:#42a5f5}}main.colorscheme-dark .footer a{color:#42a5f5}@media (prefers-color-scheme:dark){main.colorscheme-auto .footer a{color:#42a5f5}}.container{max-width:1100px!important;width:80%}.colorscheme-dark .navigation .navigation-list .navigation-item .dropdown-content{background-color:#212121}.colorscheme-dark pre{color:#333}.wiki{width:100%!important;max-width:100%!important}.wiki #body-wrapper{width:100%}.wiki .post{max-width:100%!important}.wiki .wiki-cate-aside{font-weight:400;display:inline;float:left;visibility:visible;font-size:13px;width:240px;padding:0 20px 20px}.wiki .wiki-cate-aside ul{margin:0}.wiki .wiki-cate-aside a{font-size:13px;color:#555;font-weight:400}.wiki .wiki-cate-aside ol,.wiki .wiki-cate-aside ul{list-style:none;padding-left:20px}#articleWikiWrap{margin-left:240px}@media only screen and (max-width:900px){#articleWikiWrap{margin-left:0}#articleWikiAside{display:none}}code[class*=language-],pre[class*=language-]{color:#e3eaf2;background:0 0;font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{background:#3c526d}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{background:#3c526d}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#111b27}:not(pre)>code[class*=language-]{padding:.1em .3em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#8da1b9}.token.punctuation{color:#e3eaf2}.token.delimiter.important,.token.selector .parent,.token.tag,.token.tag .token.punctuation{color:#6cc}.token.attr-name,.token.boolean,.token.boolean.important,.token.constant,.token.number,.token.selector .token.attribute{color:#e6d37a}.token.class-name,.token.key,.token.parameter,.token.property,.token.property-access,.token.variable{color:#6cb8e6}.token.attr-value,.token.color,.token.inserted,.token.selector .token.value,.token.string,.token.string .token.url-link{color:#91d076}.token.builtin,.token.keyword-array,.token.package,.token.regex{color:#f4adf4}.token.function,.token.selector .token.class,.token.selector .token.id{color:#c699e3}.token.atrule .token.rule,.token.combinator,.token.keyword,.token.operator,.token.pseudo-class,.token.pseudo-element,.token.selector,.token.unit{color:#e9ae7e}.token.deleted,.token.important{color:#cd6660}.token.keyword-this,.token.this{color:#6cb8e6}.token.bold,.token.important,.token.keyword-this,.token.this{font-weight:700}.token.delimiter.important{font-weight:inherit}.token.italic{font-style:italic}.token.entity{cursor:help}.language-markdown .token.title,.language-markdown .token.title .token.punctuation{color:#6cb8e6;font-weight:700}.language-markdown .token.blockquote.punctuation{color:#f4adf4}.language-markdown .token.code{color:#6cc}.language-markdown .token.hr.punctuation{color:#6cb8e6}.language-markdown .token.url .token.content{color:#91d076}.language-markdown .token.url-link{color:#e6d37a}.language-markdown .token.list.punctuation{color:#f4adf4}.language-json .token.operator,.language-markdown .token.table-header{color:#e3eaf2}.language-scss .token.variable{color:#6cc}.token.cr:before,.token.lf:before,.token.space:before,.token.tab:not(:empty):before{color:#8da1b9}div.code-toolbar>.toolbar a,div.code-toolbar>.toolbar button{color:#111b27;background:#6cb8e6}div.code-toolbar>.toolbar a:focus,div.code-toolbar>.toolbar a:hover,div.code-toolbar>.toolbar button:focus,div.code-toolbar>.toolbar button:hover{color:#111b27;background:rgba(108,184,230,.8549);text-decoration:none}div.code-toolbar>.toolbar span,div.code-toolbar>.toolbar span:focus,div.code-toolbar>.toolbar span:hover{color:#111b27;background:#8da1b9}.line-highlight{background:rgba(60,82,109,.37255);background:linear-gradient(90deg,rgba(60,82,109,.37255) 70%,rgba(60,82,109,.33333))}.line-highlight:before,.line-highlight[data-end]:after{background-color:#8da1b9;color:#111b27;box-shadow:0 1px #3c526d}pre[id].linkable-line-numbers span.line-numbers-rows>span:hover:before{background-color:rgba(141,161,185,.09412)}.line-numbers .line-numbers-rows{border-right:1px solid #0b121b;background:rgba(11,18,27,.47843)}.line-numbers-rows>span:before{color:rgba(141,161,185,.8549)}.rainbow-braces .token.punctuation.brace-level-1,.rainbow-braces .token.punctuation.brace-level-5,.rainbow-braces .token.punctuation.brace-level-9{color:#e6d37a}.rainbow-braces .token.punctuation.brace-level-10,.rainbow-braces .token.punctuation.brace-level-2,.rainbow-braces .token.punctuation.brace-level-6{color:#f4adf4}.rainbow-braces .token.punctuation.brace-level-11,.rainbow-braces .token.punctuation.brace-level-3,.rainbow-braces .token.punctuation.brace-level-7{color:#6cb8e6}.rainbow-braces .token.punctuation.brace-level-12,.rainbow-braces .token.punctuation.brace-level-4,.rainbow-braces .token.punctuation.brace-level-8{color:#c699e3}pre.diff-highlight>code .token.deleted:not(.prefix),pre>code.diff-highlight .token.deleted:not(.prefix){background-color:rgba(205,102,96,.12157)}pre.diff-highlight>code .token.inserted:not(.prefix),pre>code.diff-highlight .token.inserted:not(.prefix){background-color:rgba(145,208,118,.12157)}.command-line-prompt{border-right:1px solid #0b121b}.command-line-prompt>span:before{color:rgba(141,161,185,.8549)}.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;opacity:1;transition:width .1s,opacity .4s;background-color:#000;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:red}.wiki-content-aside[data-v-270c8e4a]{margin:0;padding-right:0;max-width:100%!important;padding-bottom:20px}a[data-v-4fce9e8d]{font-weight:400;word-break:break-all;color:inherit}.side-highlighted[data-v-4fce9e8d]{color:#1565c0}main.colorscheme-dark a[data-v-4fce9e8d]{color:inherit}main.colorscheme-dark .side-highlighted[data-v-4fce9e8d]{color:#1565c0}li[data-v-4fce9e8d]{margin:5px;line-height:1.5}li ul[data-v-4fce9e8d]{padding-left:0}</style><link rel="preload" href="/_nuxt/static/1632404867/wiki/content/%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7-spm-introduce/state.js" as="script"><link rel="preload" href="/_nuxt/static/1632404867/wiki/content/%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7-spm-introduce/payload.js" as="script"><link rel="preload" href="/_nuxt/static/1632404867/manifest.js" as="script">
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><main class="wrapper colorscheme-auto"><div class="content" data-v-270c8e4a><div class="wiki-category-aside" data-v-270c8e4a><div class="navigation" data-v-270c8e4a><div data-v-270c8e4a><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="arrow-left" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="fa svg-inline--fa fa-arrow-left fa-w-14" data-v-270c8e4a data-v-270c8e4a><path fill="currentColor" d="M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z" data-v-270c8e4a data-v-270c8e4a></path></svg> <span style="margin-left:8px" data-v-270c8e4a>Go back</span></div> <div style="padding:0 20px" data-v-270c8e4a>
        Home
      </div></div> <ul data-v-4fce9e8d data-v-270c8e4a><li class="directory" data-v-4fce9e8d><a href="#" data-role="directory" data-v-4fce9e8d><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="angle-down" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="fa svg-inline--fa fa-angle-down fa-w-10" data-v-4fce9e8d data-v-4fce9e8d><path fill="currentColor" d="M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z" data-v-4fce9e8d data-v-4fce9e8d></path></svg>
      iOS
    </a> <ul style="display:block" data-v-4fce9e8d><li class="file" data-v-4fce9e8d><a href="/wiki/content/iOS-Swift-ObjectMapper%20%E6%8C%87%E5%8D%97" class="title" data-v-4fce9e8d>
          Swift-ObjectMapper 指南
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/iOS-URL%20Schemes%20&&%20Universal%20Links%20%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8" class="title" data-v-4fce9e8d>
          URL Schemes && Universal Links 简单使用
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/iOS-YYModel" class="title" data-v-4fce9e8d>
          YYModel几种使用场景
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/iOS-ios-useful-link" class="title" data-v-4fce9e8d>
          '实用链接
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/iOS-mrpeak%E6%9D%82%E8%B4%A7%E9%93%BA-iOS%E5%BA%94%E7%94%A8%E5%B1%82%E6%9E%B6%E6%9E%84%E4%B9%8BCDD" class="title" data-v-4fce9e8d>
          (转)mrpeak杂货铺-iOS应用层架构之CDD
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/iOS-%E6%A3%80%E6%B5%8B%E7%A6%BB%E5%B1%8F%E6%B8%B2%E6%9F%93%E4%B8%8E%E7%BB%98%E5%88%B6%E9%AB%98%E6%80%A7%E8%83%BD%E5%9C%86%E8%A7%92" class="title" data-v-4fce9e8d>
          (待)检测离屏渲染与绘制高性能圆角
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/iOS-%E6%B7%B1%E5%BA%A6%E9%87%8D%E6%9E%84UIViewController" class="title" data-v-4fce9e8d>
          (转)mrpeak杂货铺-深度重构UIViewController
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/iOS-%E6%B7%BB%E5%8A%A0%E5%AD%97%E4%BD%93%E5%BA%93" class="title" data-v-4fce9e8d>
          使用第三方字体
        </a></li> <li class="directory" data-v-4fce9e8d><ul data-v-4fce9e8d data-v-4fce9e8d><li class="directory" data-v-4fce9e8d><a href="#" data-role="directory" data-v-4fce9e8d><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="angle-down" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="fa svg-inline--fa fa-angle-down fa-w-10" data-v-4fce9e8d data-v-4fce9e8d><path fill="currentColor" d="M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z" data-v-4fce9e8d data-v-4fce9e8d></path></svg>
      3part
    </a> <ul style="display:block" data-v-4fce9e8d><li class="file" data-v-4fce9e8d><a href="/wiki/content/3part-umeng-install" class="title" data-v-4fce9e8d>
          快速集成友盟分享
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/3part-%E5%BF%AB%E9%80%9F%E9%9B%86%E6%88%90%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98" class="title" data-v-4fce9e8d>
          快速集成微信/支付宝/银联
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/3part-%E5%BF%AB%E9%80%9F%E9%9B%86%E6%88%90%E7%99%BE%E5%BA%A6%E5%9C%B0%E5%9B%BE" class="title" data-v-4fce9e8d>
          集成百度地图、百度导航
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/3part-%E9%98%BF%E9%87%8C%E4%BA%91%E8%A7%86%E9%A2%91%E7%82%B9%E6%92%AD%E9%9B%86%E6%88%90" class="title" data-v-4fce9e8d>
          阿里云视频点播VOD
        </a></li> <li class="directory" data-v-4fce9e8d><!----></li></ul></li><li class="directory" data-v-4fce9e8d><a href="#" data-role="directory" data-v-4fce9e8d><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="angle-down" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="fa svg-inline--fa fa-angle-down fa-w-10" data-v-4fce9e8d data-v-4fce9e8d><path fill="currentColor" d="M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z" data-v-4fce9e8d data-v-4fce9e8d></path></svg>
      Autolayout
    </a> <ul style="display:block" data-v-4fce9e8d><li class="file" data-v-4fce9e8d><a href="/wiki/content/Autolayout-baseline" class="title" data-v-4fce9e8d>
          label底部对齐、顶部对齐
        </a></li> <li class="directory" data-v-4fce9e8d><!----></li></ul></li><li class="directory" data-v-4fce9e8d><a href="#" data-role="directory" data-v-4fce9e8d><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="angle-down" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="fa svg-inline--fa fa-angle-down fa-w-10" data-v-4fce9e8d data-v-4fce9e8d><path fill="currentColor" d="M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z" data-v-4fce9e8d data-v-4fce9e8d></path></svg>
      Error
    </a> <ul style="display:block" data-v-4fce9e8d><li class="file" data-v-4fce9e8d><a href="/wiki/content/Error-2017-07-31" class="title" data-v-4fce9e8d>
          Undefined symbols for architecture ..
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/Error-Shell-Script-Invocation-Error" class="title" data-v-4fce9e8d>
          'Shell Script Invocation Error'
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/Error-gesture" class="title" data-v-4fce9e8d>
          tableViewCell的点击和tapGestureRecognizer冲突的处理
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/Error-%E5%B4%A9%E6%BA%83%E5%88%86%E6%9E%90" class="title" data-v-4fce9e8d>
          崩溃分析(转载)
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/Error-%E7%AB%96%E5%B1%8F%E4%B8%8B%E8%A7%86%E9%A2%91%E5%85%A8%E5%B1%8F%E6%92%AD%E6%94%BE" class="title" data-v-4fce9e8d>
          (转)竖屏下视频全屏播放
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/Error-%E8%AF%81%E4%B9%A6%E8%BF%87%E6%9C%9F%E6%88%96%E8%80%85%E7%A7%BB%E9%99%A4%E5%AF%B9app%E7%9A%84%E5%BD%B1%E5%93%8D" class="title" data-v-4fce9e8d>
          证书过期或者移除对app的影响
        </a></li> <li class="directory" data-v-4fce9e8d><!----></li></ul></li><li class="directory" data-v-4fce9e8d><a href="#" data-role="directory" data-v-4fce9e8d><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="angle-down" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="fa svg-inline--fa fa-angle-down fa-w-10" data-v-4fce9e8d data-v-4fce9e8d><path fill="currentColor" d="M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z" data-v-4fce9e8d data-v-4fce9e8d></path></svg>
      Objective-C
    </a> <ul style="display:block" data-v-4fce9e8d><li class="file" data-v-4fce9e8d><a href="/wiki/content/Objective-C-KVO%20-%20Observe%20property%20of%20an%20object%20contained%20in%20a%20NSArray" class="title" data-v-4fce9e8d>
          KVO - Observe property of an object contained in a NSArray
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/Objective-C-NSArrayFilter" class="title" data-v-4fce9e8d>
          NSArray: filteredArrayUsingPredicate
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/Objective-C-NSRecursiveLock" class="title" data-v-4fce9e8d>
          NSRecursiveLock
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/Objective-C-NSStringCompareOptions" class="title" data-v-4fce9e8d>
          NSStringCompareOptions
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/Objective-C-containsObject-or-removeObject" class="title" data-v-4fce9e8d>
          containsObject or removeObject
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/Objective-C-get-lunarholidays" class="title" data-v-4fce9e8d>
          节气、节假日计算
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/Objective-C-use-dispatch_queue_t-with-strong" class="title" data-v-4fce9e8d>
          dispatch_queue_t 用strong来修饰
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/Objective-C-%E5%86%9C%E5%8E%86" class="title" data-v-4fce9e8d>
          农历
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/Objective-C-%E5%B8%B8%E7%94%A8%E7%9A%84%E5%AE%8F" class="title" data-v-4fce9e8d>
          常用的宏
        </a></li> <li class="directory" data-v-4fce9e8d><!----></li></ul></li><li class="directory" data-v-4fce9e8d><a href="#" data-role="directory" data-v-4fce9e8d><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="angle-down" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="fa svg-inline--fa fa-angle-down fa-w-10" data-v-4fce9e8d data-v-4fce9e8d><path fill="currentColor" d="M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z" data-v-4fce9e8d data-v-4fce9e8d></path></svg>
      StatusBar
    </a> <ul style="display:block" data-v-4fce9e8d><li class="file" data-v-4fce9e8d><a href="/wiki/content/StatusBar-how-to-detect-touches-in-status-bar" class="title" data-v-4fce9e8d>
          获取StatusBar的点击事件
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/StatusBar-ios-status-bar-style" class="title" data-v-4fce9e8d>
          修改StatusBarStyle以及statusBar的背景颜色
        </a></li> <li class="directory" data-v-4fce9e8d><!----></li></ul></li><li class="directory" data-v-4fce9e8d><a href="#" data-role="directory" data-v-4fce9e8d><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="angle-down" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="fa svg-inline--fa fa-angle-down fa-w-10" data-v-4fce9e8d data-v-4fce9e8d><path fill="currentColor" d="M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z" data-v-4fce9e8d data-v-4fce9e8d></path></svg>
      UIKit
    </a> <ul style="display:block" data-v-4fce9e8d><li class="file" data-v-4fce9e8d><a href="/wiki/content/UIKit-UIAlertController%E4%BF%AE%E6%94%B9%E6%96%87%E5%AD%97%E5%AF%B9%E9%BD%90%E6%96%B9%E5%BC%8F" class="title" data-v-4fce9e8d>
          UIAlertController修改文字对齐方式
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/UIKit-UIDynamic%20Animator" class="title" data-v-4fce9e8d>
          UIDynamic Animator
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/UIKit-UISplit%E2%80%8BView%E2%80%8BController%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0" class="title" data-v-4fce9e8d>
          UISplit​View​Controller 学习笔记
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/UIKit-searchBar-style" class="title" data-v-4fce9e8d>
          如何修改searchBar的样式
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/UIKit-uioffset" class="title" data-v-4fce9e8d>
          UIOffset
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/UIKit-%E5%B1%8F%E5%B9%95%E6%97%8B%E8%BD%AC.md" class="title" data-v-4fce9e8d>
          屏幕旋转
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/UIKit-%E7%A6%BB%E5%B1%8F%E6%B8%B2%E6%9F%93" class="title" data-v-4fce9e8d>
          (转)关于iOS离屏渲染的深入研究
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/UIKit-%E7%BB%99WebView%E6%B7%BB%E5%8A%A0%E4%B8%AA%E7%B2%97%E7%B3%99%E7%9A%84%E5%8A%A0%E8%BD%BD%E5%8A%A8%E7%94%BB" class="title" data-v-4fce9e8d>
          给UIWebView添加个粗糙的加载动画
        </a></li> <li class="directory" data-v-4fce9e8d><!----></li></ul></li><li class="directory" data-v-4fce9e8d><a href="#" data-role="directory" data-v-4fce9e8d><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="angle-down" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="fa svg-inline--fa fa-angle-down fa-w-10" data-v-4fce9e8d data-v-4fce9e8d><path fill="currentColor" d="M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z" data-v-4fce9e8d data-v-4fce9e8d></path></svg>
      UITextFeild
    </a> <ul style="display:block" data-v-4fce9e8d><li class="file" data-v-4fce9e8d><a href="/wiki/content/UITextFeild-2018-01-16" class="title" data-v-4fce9e8d>
          修改光标颜色和clear button的颜色
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/UITextFeild-uitextfeild-select-all" class="title" data-v-4fce9e8d>
          默认选中文本
        </a></li> <li class="directory" data-v-4fce9e8d><!----></li></ul></li><li class="directory" data-v-4fce9e8d><a href="#" data-role="directory" data-v-4fce9e8d><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="angle-down" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="fa svg-inline--fa fa-angle-down fa-w-10" data-v-4fce9e8d data-v-4fce9e8d><path fill="currentColor" d="M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z" data-v-4fce9e8d data-v-4fce9e8d></path></svg>
      keyboard
    </a> <ul style="display:block" data-v-4fce9e8d><li class="file" data-v-4fce9e8d><a href="/wiki/content/keyboard-disable-3rd-keyboard" class="title" data-v-4fce9e8d>
          禁用第三方键盘
        </a></li> <li class="directory" data-v-4fce9e8d><!----></li></ul></li><li class="directory" data-v-4fce9e8d><a href="#" data-role="directory" data-v-4fce9e8d><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="angle-down" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="fa svg-inline--fa fa-angle-down fa-w-10" data-v-4fce9e8d data-v-4fce9e8d><path fill="currentColor" d="M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z" data-v-4fce9e8d data-v-4fce9e8d></path></svg>
      loc
    </a> <ul style="display:block" data-v-4fce9e8d><li class="file" data-v-4fce9e8d><a href="/wiki/content/loc-2018-01-22" class="title" data-v-4fce9e8d>
          CLPlacemark中文
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/loc-sim-locaiton-ios" class="title" data-v-4fce9e8d>
          真机或模拟器修改定位位置
        </a></li> <li class="directory" data-v-4fce9e8d><!----></li></ul></li><li class="directory" data-v-4fce9e8d><a href="#" data-role="directory" data-v-4fce9e8d><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="angle-down" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="fa svg-inline--fa fa-angle-down fa-w-10" data-v-4fce9e8d data-v-4fce9e8d><path fill="currentColor" d="M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z" data-v-4fce9e8d data-v-4fce9e8d></path></svg>
      tableView
    </a> <ul style="display:block" data-v-4fce9e8d><li class="file" data-v-4fce9e8d><a href="/wiki/content/tableView-cell-seprateLine" class="title" data-v-4fce9e8d>
          cell分割线的颜色
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/tableView-compare-NSIndexPath" class="title" data-v-4fce9e8d>
          compare NSIndexPath
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/tableView-tabeleView%20%E8%8E%B7%E5%8F%96%E6%9F%90%E4%B8%AAcell%E7%9A%84%E9%AB%98%E5%BA%A6" class="title" data-v-4fce9e8d>
          tabeleView 获取某个cell的高度
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/tableView-taleview-headerfooterView-xib" class="title" data-v-4fce9e8d>
          xib UITableViewHeaderFooterView
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/tableView-%E7%BB%93%E5%90%88layoutMargins%E5%81%9AtableViewCell%E7%9A%84%E9%80%82%E9%85%8D" class="title" data-v-4fce9e8d>
          结合layoutMargins做cell的适配
        </a></li> <li class="directory" data-v-4fce9e8d><!----></li></ul></li><li class="directory" data-v-4fce9e8d><a href="#" data-role="directory" data-v-4fce9e8d><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="angle-down" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="fa svg-inline--fa fa-angle-down fa-w-10" data-v-4fce9e8d data-v-4fce9e8d><path fill="currentColor" d="M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z" data-v-4fce9e8d data-v-4fce9e8d></path></svg>
      xib
    </a> <ul style="display:block" data-v-4fce9e8d><li class="file" data-v-4fce9e8d><a href="/wiki/content/xib-%E5%A6%82%E4%BD%95%E6%9B%BF%E6%8D%A2%E5%B7%B2%E6%9C%89%E7%9A%84%E6%8E%A7%E4%BB%B6" class="title" data-v-4fce9e8d>
          如何替换已有的控件
        </a></li> <li class="directory" data-v-4fce9e8d><!----></li></ul></li><li class="directory" data-v-4fce9e8d><a href="#" data-role="directory" data-v-4fce9e8d><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="angle-down" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="fa svg-inline--fa fa-angle-down fa-w-10" data-v-4fce9e8d data-v-4fce9e8d><path fill="currentColor" d="M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z" data-v-4fce9e8d data-v-4fce9e8d></path></svg>
      代码片段
    </a> <ul style="display:block" data-v-4fce9e8d><li class="file" data-v-4fce9e8d><a href="/wiki/content/%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5-%E5%88%86%E5%89%B2%E5%B0%8F%E8%AF%B4%E7%AB%A0%E8%8A%82" class="title" data-v-4fce9e8d>
          分割小说章节
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5-%E6%88%AA%E5%9B%BE%20%E6%88%AA%E9%95%BF%E5%9B%BE%20%E9%AB%98%E6%B8%85%E5%9B%BE" class="title" data-v-4fce9e8d>
          截图 截长图 高清图
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5-%E8%AF%BB%E5%8F%96%E6%9C%AA%E7%9F%A5%E7%B1%BB%E5%9E%8B%E7%9A%84txt%E6%96%87%E4%BB%B6" class="title" data-v-4fce9e8d>
          读取未知类型的txt文件 
        </a></li> <li class="directory" data-v-4fce9e8d><!----></li></ul></li><li class="directory" data-v-4fce9e8d><a href="#" data-role="directory" data-v-4fce9e8d><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="angle-down" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="fa svg-inline--fa fa-angle-down fa-w-10" data-v-4fce9e8d data-v-4fce9e8d><path fill="currentColor" d="M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z" data-v-4fce9e8d data-v-4fce9e8d></path></svg>
      包管理工具
    </a> <ul style="display:block" data-v-4fce9e8d><li class="file" data-v-4fce9e8d><a href="/wiki/content/%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7-spm-resource-handle" class="title" data-v-4fce9e8d>
          SWift Package Manager资源文件管理
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7-spm-introduce" aria-current="page" class="title nuxt-link-exact-active nuxt-link-active side-highlighted" data-v-4fce9e8d>
          Swift Package Manager介绍
        </a></li> <li class="directory" data-v-4fce9e8d><!----></li></ul></li><li class="directory" data-v-4fce9e8d><a href="#" data-role="directory" data-v-4fce9e8d><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="angle-down" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="fa svg-inline--fa fa-angle-down fa-w-10" data-v-4fce9e8d data-v-4fce9e8d><path fill="currentColor" d="M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z" data-v-4fce9e8d data-v-4fce9e8d></path></svg>
      日历
    </a> <ul style="display:block" data-v-4fce9e8d><li class="file" data-v-4fce9e8d><a href="/wiki/content/%E6%97%A5%E5%8E%86-FSCalendar" class="title" data-v-4fce9e8d>
          FSCalendar
        </a></li> <li class="directory" data-v-4fce9e8d><!----></li></ul></li><li class="directory" data-v-4fce9e8d><a href="#" data-role="directory" data-v-4fce9e8d><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="angle-down" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="fa svg-inline--fa fa-angle-down fa-w-10" data-v-4fce9e8d data-v-4fce9e8d><path fill="currentColor" d="M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z" data-v-4fce9e8d data-v-4fce9e8d></path></svg>
      适配
    </a> <ul style="display:block" data-v-4fce9e8d><li class="file" data-v-4fce9e8d><a href="/wiki/content/%E9%80%82%E9%85%8D-NFC%E5%88%9D%E8%AF%95" class="title" data-v-4fce9e8d>
          NFC初试
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/%E9%80%82%E9%85%8D-iOS11%20Xcode9%E6%96%B0%E5%8A%9F%E8%83%BD%E6%96%B0%E7%89%B9%E6%80%A7" class="title" data-v-4fce9e8d>
          iOS11 Xcode9新功能新特性
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/%E9%80%82%E9%85%8D-iOS11%20tableView%E9%80%82%E9%85%8D%E4%B8%8D%E5%AE%8C%E5%85%A8%E6%8C%87%E5%8D%97" class="title" data-v-4fce9e8d>
          iOS11 tableView适配不完全指南
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/%E9%80%82%E9%85%8D-iOS11%E5%88%98%E6%B5%B7%E5%B1%8FEdgeProtect%E7%9B%B8%E5%85%B3" class="title" data-v-4fce9e8d>
          iOS11刘海屏EdgeProtect相关
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/%E9%80%82%E9%85%8D-iOS11%E9%80%82%E9%85%8D%E5%8F%82%E8%80%83" class="title" data-v-4fce9e8d>
          iOS11 适配参考
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/%E9%80%82%E9%85%8D-iOS14hidesBottomBarWhenPushed%E5%85%BC%E5%AE%B9%E9%97%AE%E9%A2%98" class="title" data-v-4fce9e8d>
          iOS14 hidesBottomBarWhenPushed兼容问题
        </a></li><li class="file" data-v-4fce9e8d><a href="/wiki/content/%E9%80%82%E9%85%8D-touch-id" class="title" data-v-4fce9e8d>
          touch Id
        </a></li> <li class="directory" data-v-4fce9e8d><!----></li></ul></li><li class="directory" data-v-4fce9e8d><a href="#" data-role="directory" data-v-4fce9e8d><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="angle-down" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="fa svg-inline--fa fa-angle-down fa-w-10" data-v-4fce9e8d data-v-4fce9e8d><path fill="currentColor" d="M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z" data-v-4fce9e8d data-v-4fce9e8d></path></svg>
      问与答
    </a> <ul style="display:block" data-v-4fce9e8d><li class="file" data-v-4fce9e8d><a href="/wiki/content/%E9%97%AE%E4%B8%8E%E7%AD%94-%E4%B8%BA%E4%BB%80%E4%B9%88ui%E6%93%8D%E4%BD%9C%E8%A6%81%E5%9C%A8%E4%B8%BB%E7%BA%BF%E7%A8%8B" class="title" data-v-4fce9e8d>
          为什么ui操作要在主线程
        </a></li> <li class="directory" data-v-4fce9e8d><!----></li></ul></li></ul></li></ul></li></ul></div> <div class="wiki-content-aside" data-v-270c8e4a><section class="container post" style="width:100%" data-v-270c8e4a><article data-v-270c8e4a><header data-v-ff468d3a data-v-270c8e4a><div class="post-title" data-v-ff468d3a><h1 class="title" data-v-ff468d3a>Swift Package Manager介绍</h1></div> <div class="post-meta" data-v-ff468d3a><div class="date" data-v-ff468d3a><span class="posted-on" data-v-ff468d3a><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="calendar-alt" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="fa svg-inline--fa fa-calendar-alt fa-w-14" data-v-ff468d3a data-v-ff468d3a><path fill="currentColor" d="M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z" data-v-ff468d3a data-v-ff468d3a></path></svg> <time datetime="2020-06-25 11:32:22" data-v-ff468d3a>
                November 18, 2020
              </time></span></div> <div class="categories" data-v-ff468d3a><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="folder" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="fa svg-inline--fa fa-folder fa-w-16" data-v-ff468d3a data-v-ff468d3a><path fill="currentColor" d="M464 128H272l-64-64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V176c0-26.51-21.49-48-48-48z" data-v-ff468d3a data-v-ff468d3a></path></svg> <a href="/wiki/#iOS" data-v-ff468d3a> iOS</a></div> <!----></div></header> <aside id="body-wrapper" data-v-270c8e4a><div id="contents" class="body-content co-width-10" data-v-270c8e4a><div class="nuxt-content" data-v-270c8e4a data-v-270c8e4a><blockquote data-v-270c8e4a data-v-270c8e4a>
<p data-v-270c8e4a data-v-270c8e4a><a href="https://juejin.im/post/6844904019815579661" rel="nofollow noopener noreferrer" target="_blank" data-v-270c8e4a data-v-270c8e4a>https://juejin.im/post/6844904019815579661</a>    2019年12月13日
<a href="https://swift.org/package-manager/" rel="nofollow noopener noreferrer" target="_blank" data-v-270c8e4a data-v-270c8e4a>https://swift.org/package-manager/</a></p>
</blockquote>
<p data-v-270c8e4a data-v-270c8e4a>SPM是苹果官方推出的包管理工具。从Xcode11开始,有对SPM的插件加成。 这个包管理工具包含在swift3或者更高版本中。</p>
<h2 id="swiftpm-是什么" data-v-270c8e4a data-v-270c8e4a><a href="#swiftpm-%E6%98%AF%E4%BB%80%E4%B9%88" aria-hidden="true" tabindex="-1" data-v-270c8e4a data-v-270c8e4a><span class="icon icon-link" data-v-270c8e4a data-v-270c8e4a></span></a>SwiftPM 是什么</h2>
<p data-v-270c8e4a data-v-270c8e4a>Swift Package Manager 是一个苹果官方出的管理源代码分发的工具，目的是更简单的使用别人共享的代码。它会直接处理包之间的依赖管理、版本控制、编译和链接。从总体功能上来说，和 iOS 平台上的 Cocoapods、Carthage 一样。</p>
<p data-v-270c8e4a data-v-270c8e4a>一开始 SwiftPM 只支持在 MacOS 和 Linux 平台使用，大多是一些 Vapor、Perfect 之类的后端服务或者脚本在用，所以对于 iOS 开发者来说会比较陌生。Xcode 11 开始自集成了 <code data-v-270c8e4a data-v-270c8e4a>libSwiftPM</code>，这样一来，iOS、watchOS、tvOS 等平台也都可以使用了，不过由于是集成的依赖库，所以使用方法有些不太一样，下面会另说。文中不说哪个平台的使用默认是指 MacOS 和 Linux 平台。</p>
<h3 id="概念" data-v-270c8e4a data-v-270c8e4a><a href="#%E6%A6%82%E5%BF%B5" aria-hidden="true" tabindex="-1" data-v-270c8e4a data-v-270c8e4a><span class="icon icon-link" data-v-270c8e4a data-v-270c8e4a></span></a>概念</h3>
<p data-v-270c8e4a data-v-270c8e4a><strong data-v-270c8e4a data-v-270c8e4a>Modules</strong></p>
<p data-v-270c8e4a data-v-270c8e4a>Swift将代码组织到模块中。每个模块都指定一个名称空间，并强制执行访问控制，以便可以在模块外部访问使用。</p>
<p data-v-270c8e4a data-v-270c8e4a>程序可以将所有代码都放在一个模块中，也可以将其他模块作为依赖项导入。除了少数系统提供的模块外，例如macOS上的Darwin或Linux上的Glibc，大多数依赖项都需要下载并构建代码才能使用。</p>
<p data-v-270c8e4a data-v-270c8e4a>当您为解决特定问题的代码使用单独的模块时，该代码可以在其他情况下复用。使用模块，您可以在其他开发者的代码的基础上构建代码，而不必自己从头开始实现。</p>
<p data-v-270c8e4a data-v-270c8e4a><strong data-v-270c8e4a data-v-270c8e4a>Packages</strong></p>
<p data-v-270c8e4a data-v-270c8e4a>一个Package由Swift源文件和清单(manifest)文件组成。清单(manifest)文件称为Package.swift，它使用<code data-v-270c8e4a data-v-270c8e4a>PackageDescription</code>模块定义了包的名称及其内容。</p>
<p data-v-270c8e4a data-v-270c8e4a>每个Package中有一个或多个targets。每个targets都指定一个product，并可以声明一个或多个依赖项。</p>
<div class="nuxt-content-highlight" data-v-270c8e4a data-v-270c8e4a><pre class="line-numbers language-swift" data-v-270c8e4a data-v-270c8e4a><code data-v-270c8e4a data-v-270c8e4a><span class="token comment" data-v-270c8e4a data-v-270c8e4a>//Package.swift 举例</span>
<span class="token keyword" data-v-270c8e4a data-v-270c8e4a>import</span> <span class="token builtin" data-v-270c8e4a data-v-270c8e4a>PackageDescription</span>

<span class="token keyword" data-v-270c8e4a data-v-270c8e4a>let</span> package <span class="token operator" data-v-270c8e4a data-v-270c8e4a>=</span> <span class="token function" data-v-270c8e4a data-v-270c8e4a>Package</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>(</span>
    name<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token string" data-v-270c8e4a data-v-270c8e4a>"dealer"</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span>
    products<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>[</span>
        <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token function" data-v-270c8e4a data-v-270c8e4a>executable</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>(</span>name<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token string" data-v-270c8e4a data-v-270c8e4a>"Dealer"</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span> targets<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>[</span><span class="token string" data-v-270c8e4a data-v-270c8e4a>"Dealer"</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>]</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>)</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span>
    <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>]</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span>
    dependencies<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>[</span>
        <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token function" data-v-270c8e4a data-v-270c8e4a>package</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>(</span>url<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token string" data-v-270c8e4a data-v-270c8e4a>"https://github.com/apple/example-package-deckofplayingcards.git"</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span> from<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token string" data-v-270c8e4a data-v-270c8e4a>"3.0.0"</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>)</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span>
    <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>]</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span>
    targets<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>[</span>
        <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token function" data-v-270c8e4a data-v-270c8e4a>target</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>(</span>
            name<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token string" data-v-270c8e4a data-v-270c8e4a>"Dealer"</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span>
            dependencies<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>[</span><span class="token string" data-v-270c8e4a data-v-270c8e4a>"DeckOfPlayingCards"</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>]</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>)</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span>
    <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>]</span>
<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>)</span>
</code></pre></div>
<p data-v-270c8e4a data-v-270c8e4a><strong data-v-270c8e4a data-v-270c8e4a>Products</strong></p>
<p data-v-270c8e4a data-v-270c8e4a>一个target可以构建library或可执行文件作为其Product。一个library包含一个可以被其他Swift代码导入的模块。可执行文件是可以由操作系统运行的程序。</p>
<p data-v-270c8e4a data-v-270c8e4a><strong data-v-270c8e4a data-v-270c8e4a>Dependencies</strong></p>
<p data-v-270c8e4a data-v-270c8e4a>target的依赖项，依赖是一个递归的过程。</p>
<h2 id="swiftpm-的创建和使用" data-v-270c8e4a data-v-270c8e4a><a href="#swiftpm-%E7%9A%84%E5%88%9B%E5%BB%BA%E5%92%8C%E4%BD%BF%E7%94%A8" aria-hidden="true" tabindex="-1" data-v-270c8e4a data-v-270c8e4a><span class="icon icon-link" data-v-270c8e4a data-v-270c8e4a></span></a>SwiftPM 的创建和使用</h2>
<p data-v-270c8e4a data-v-270c8e4a>SwiftPM 管理的每个 <code data-v-270c8e4a data-v-270c8e4a>Package</code>相当于 Xcode.Project，并且有具体的代码定义，包的目录下必须含有 <code data-v-270c8e4a data-v-270c8e4a>Package.swift</code> 和 <code data-v-270c8e4a data-v-270c8e4a>Sources</code>代码文件夹（链接系统的包除外）。<code data-v-270c8e4a data-v-270c8e4a>Package.swift</code> 是整个 Package 的配置项，类似 Cocoapods 中 <code data-v-270c8e4a data-v-270c8e4a>.podspec</code> 和 <code data-v-270c8e4a data-v-270c8e4a>.podfile</code> 的集合体。下面介绍下 SwiftPM 的简单创建和使用。</p>
<h3 id="创建一个可执行的包" data-v-270c8e4a data-v-270c8e4a><a href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%8F%AF%E6%89%A7%E8%A1%8C%E7%9A%84%E5%8C%85" aria-hidden="true" tabindex="-1" data-v-270c8e4a data-v-270c8e4a><span class="icon icon-link" data-v-270c8e4a data-v-270c8e4a></span></a>创建一个可执行的包</h3>
<p data-v-270c8e4a data-v-270c8e4a>执行以下命令</p>
<div class="nuxt-content-highlight" data-v-270c8e4a data-v-270c8e4a><pre class="line-numbers language-text" data-v-270c8e4a data-v-270c8e4a><code data-v-270c8e4a data-v-270c8e4a>➜  mkdir MyPackage
➜  cd MyPackage
➜  swift package init --type executable
➜  swift build
➜  swift run
Hello, World!
</code></pre></div>
<p data-v-270c8e4a data-v-270c8e4a>这里在创建时使用了 <code data-v-270c8e4a data-v-270c8e4a>--type</code> 参数，通过执行 <code data-v-270c8e4a data-v-270c8e4a>help</code> 命令可得知，一共有四个类型</p>
<p data-v-270c8e4a data-v-270c8e4a><code data-v-270c8e4a data-v-270c8e4a>--type empty|library|executable|system-module</code></p>
<p data-v-270c8e4a data-v-270c8e4a>分别是 空包、静态包、可执行包、系统包，默认不加参数时创建的是 <code data-v-270c8e4a data-v-270c8e4a>library</code> 类型，主要区别如下：</p>
<ul data-v-270c8e4a data-v-270c8e4a>
<li data-v-270c8e4a data-v-270c8e4a>空包：Source 文件夹下什么都没有，也不能编译</li>
<li data-v-270c8e4a data-v-270c8e4a>静态包：Source 文件夹下有个和包同名 swift 文件，里面有个空结构体</li>
<li data-v-270c8e4a data-v-270c8e4a>可执行包：Source 文件夹下有个 <code data-v-270c8e4a data-v-270c8e4a>main.swift</code> 文件，在 build 之后会在 .build/debug/ 目录下生成一个可执行文件，可通过 <code data-v-270c8e4a data-v-270c8e4a>swift run</code> 或者直接点击运行，从而启动一个进程</li>
<li data-v-270c8e4a data-v-270c8e4a>系统包：这种包是专门为了链接系统库（例如 <code data-v-270c8e4a data-v-270c8e4a>libgit</code>、<code data-v-270c8e4a data-v-270c8e4a>jpeglib</code>、<code data-v-270c8e4a data-v-270c8e4a>mysql</code> 这种系统库）准备的，本身不需要任何代码，所以也没有 Source 文件夹，但是需要编辑 <code data-v-270c8e4a data-v-270c8e4a>module.modulemap</code> 文件去查找系统库路径 (Swift 4.2 已经被其他方式取代)</li>
</ul>
<p data-v-270c8e4a data-v-270c8e4a>这里的几个类型只是根据标志性文件定义，比如静态包默认是不能编译的，但是加了 <code data-v-270c8e4a data-v-270c8e4a>main.swift</code> 之后，就变成可执行包了。</p>
<h3 id="添加依赖" data-v-270c8e4a data-v-270c8e4a><a href="#%E6%B7%BB%E5%8A%A0%E4%BE%9D%E8%B5%96" aria-hidden="true" tabindex="-1" data-v-270c8e4a data-v-270c8e4a><span class="icon icon-link" data-v-270c8e4a data-v-270c8e4a></span></a>添加依赖</h3>
<p data-v-270c8e4a data-v-270c8e4a>如果需要依赖其他的包， 需要在 <code data-v-270c8e4a data-v-270c8e4a>Package.swift</code> 定义依赖项和版本，像下面这样：</p>
<div class="nuxt-content-highlight" data-v-270c8e4a data-v-270c8e4a><pre class="line-numbers language-text" data-v-270c8e4a data-v-270c8e4a><code data-v-270c8e4a data-v-270c8e4a>// swift-tools-version:4.2
// The swift-tools-version declares the minimum version of Swift required to build this package.

import PackageDescription

let package = Package(
    name: "WYMobileWebsite",
    dependencies: [
        .package(url: "https://github.com/PerfectlySoft/Perfect-HTTPServer.git", from: "3.0.0"),
        .package(url:"https://github.com/PerfectlySoft/Perfect-MySQL.git", from: "3.0.0"),
        .package(url:"https://github.com/PerfectlySoft/Perfect-Session.git", from: "3.0.0")
    ],
    targets: [
        // Targets are the basic building blocks of a package. A target can define a module or a test suite.
        // Targets can depend on other targets in this package, and on products in packages which this package depends on.
        .target(
            name: "WYMobileWebsite",
            dependencies: ["PerfectHTTPServer","PerfectMySQL","PerfectSession"]),
        .testTarget(
            name: "WYMobileWebsiteTests",
            dependencies: ["WYMobileWebsite"]),
    ]
)
</code></pre></div>
<p data-v-270c8e4a data-v-270c8e4a>需要注意的是 <strong data-v-270c8e4a data-v-270c8e4a>最上面那行注释不要删，它是用来查找对应的 swift-tool-version 版本的</strong>。</p>
<p data-v-270c8e4a data-v-270c8e4a>在 <code data-v-270c8e4a data-v-270c8e4a>Package.swift</code> 配置之后，再执行下 <code data-v-270c8e4a data-v-270c8e4a>Swift build</code> 之后就会生成 .build 文件夹， <code data-v-270c8e4a data-v-270c8e4a>Source</code> 文件夹的代码里也就可以 <code data-v-270c8e4a data-v-270c8e4a>import Perfect</code> 了</p>
<h3 id="添加系统依赖包" data-v-270c8e4a data-v-270c8e4a><a href="#%E6%B7%BB%E5%8A%A0%E7%B3%BB%E7%BB%9F%E4%BE%9D%E8%B5%96%E5%8C%85" aria-hidden="true" tabindex="-1" data-v-270c8e4a data-v-270c8e4a><span class="icon icon-link" data-v-270c8e4a data-v-270c8e4a></span></a>添加系统依赖包</h3>
<p data-v-270c8e4a data-v-270c8e4a>编写 MacOS/Linux 程序时经常会遇到依赖本地系统库的情况，在官方文档上有很长一段文字描述如何设置系统库依赖的，需要建立一个专门用来链接系统库的包，但是在 Swift 4.2 之后已经被替代了（但是老的写法暂时也还能用）。比较有趣的是，这个更改已经在 2018 年 9 月 的 <a href="https://github.com/apple/swift-package-manager/blob/263171977ebcd47f4aaca1202cff5a96c5158a64/Documentation/Usage.md#import-system-libraries" rel="nofollow noopener noreferrer" target="_blank" data-v-270c8e4a data-v-270c8e4a>提交</a> 就已经更新到 github 了，代码实现已经合并到 master，但是文档没更新到 master.readme，对之前写法感兴趣的可以去看看这个 [链接](warning: system packages are deprecated; use system library targets instead)。下面主要介绍新的写法。</p>
<h4 id="下载依赖的-c-库到本地" data-v-270c8e4a data-v-270c8e4a><a href="#%E4%B8%8B%E8%BD%BD%E4%BE%9D%E8%B5%96%E7%9A%84-c-%E5%BA%93%E5%88%B0%E6%9C%AC%E5%9C%B0" aria-hidden="true" tabindex="-1" data-v-270c8e4a data-v-270c8e4a><span class="icon icon-link" data-v-270c8e4a data-v-270c8e4a></span></a>下载依赖的 C 库到本地</h4>
<p data-v-270c8e4a data-v-270c8e4a>如果要添加系统依赖库，首先得本地有系统库，以 <code data-v-270c8e4a data-v-270c8e4a>Cairo</code> 这个 2D 图形库为例（官方文档是用这个做例子的，我就照抄过来了，而且这个库不需要什么环境变量），先通过 gem 或者 homebrew 下载库到本地，以 homebrew 为例</p>
<p data-v-270c8e4a data-v-270c8e4a><code data-v-270c8e4a data-v-270c8e4a>brew install cairo</code></p>
<p data-v-270c8e4a data-v-270c8e4a>下载完成后在 <code data-v-270c8e4a data-v-270c8e4a>/usr/local/lib/pkgconfig/</code> 文件夹下就能找到 <code data-v-270c8e4a data-v-270c8e4a>cairo.pc</code> 文件，这个配置文件用于找寻系统库的 lib 和 header 文件。有的库通过 homebrew 下载后并不会自动添加到 <code data-v-270c8e4a data-v-270c8e4a>/usr/local/lib/pkgconfig/</code> 这个地址（比如 mysql 这个 zz），需要通过 <code data-v-270c8e4a data-v-270c8e4a>ln- s</code> 命令把具体目录地址的文件复制一份放在这里。</p>
<h4 id="创建一个可执行的包作为主包" data-v-270c8e4a data-v-270c8e4a><a href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%8F%AF%E6%89%A7%E8%A1%8C%E7%9A%84%E5%8C%85%E4%BD%9C%E4%B8%BA%E4%B8%BB%E5%8C%85" aria-hidden="true" tabindex="-1" data-v-270c8e4a data-v-270c8e4a><span class="icon icon-link" data-v-270c8e4a data-v-270c8e4a></span></a>创建一个可执行的包作为主包</h4>
<div class="nuxt-content-highlight" data-v-270c8e4a data-v-270c8e4a><pre class="line-numbers language-text" data-v-270c8e4a data-v-270c8e4a><code data-v-270c8e4a data-v-270c8e4a>➜  mkdir example
➜  cd example
➜  swift package init --type executable
</code></pre></div>
<h4 id="创建系统依赖文件并编辑" data-v-270c8e4a data-v-270c8e4a><a href="#%E5%88%9B%E5%BB%BA%E7%B3%BB%E7%BB%9F%E4%BE%9D%E8%B5%96%E6%96%87%E4%BB%B6%E5%B9%B6%E7%BC%96%E8%BE%91" aria-hidden="true" tabindex="-1" data-v-270c8e4a data-v-270c8e4a><span class="icon icon-link" data-v-270c8e4a data-v-270c8e4a></span></a>创建系统依赖文件并编辑</h4>
<div class="nuxt-content-highlight" data-v-270c8e4a data-v-270c8e4a><pre class="line-numbers language-text" data-v-270c8e4a data-v-270c8e4a><code data-v-270c8e4a data-v-270c8e4a>cd Sources 
mkdir cairo 
cd cairo 
touch cairo.h 
touch module.modulemap
</code></pre></div>
<p data-v-270c8e4a data-v-270c8e4a>此时文件目录变成这样：</p>
<div class="nuxt-content-highlight" data-v-270c8e4a data-v-270c8e4a><pre class="line-numbers language-text" data-v-270c8e4a data-v-270c8e4a><code data-v-270c8e4a data-v-270c8e4a>.
├── Package.swift
├── README.md
├── Sources
│   ├── cairo
│   │   ├── cairo.h
│   │   └── module.modulemap
│   └── example
│       └── main.swift
└── Tests
    ├── LinuxMain.swift
    └── exampleTests
        ├── XCTestManifests.swift
        └── exampleTests.swift
</code></pre></div>
<p data-v-270c8e4a data-v-270c8e4a>在 <code data-v-270c8e4a data-v-270c8e4a>cairo.h</code> 中添加这行代码：<code data-v-270c8e4a data-v-270c8e4a>#include &lt;cairo.h></code>，在 <code data-v-270c8e4a data-v-270c8e4a>module.modulemap</code> 中添加下面这行代码</p>
<div class="nuxt-content-highlight" data-v-270c8e4a data-v-270c8e4a><pre class="line-numbers language-text" data-v-270c8e4a data-v-270c8e4a><code data-v-270c8e4a data-v-270c8e4a>module Foo {
    umbrella header "cairo.h"
    link "cairo"
}
</code></pre></div>
<p data-v-270c8e4a data-v-270c8e4a>这里 <code data-v-270c8e4a data-v-270c8e4a>Foo</code> 这个 moduleName 我们想怎么写都行，等下在 <code data-v-270c8e4a data-v-270c8e4a>Package.swift</code> 要写的也是这个名字。第一行标明我们头文件名，就是我们刚才创建的 <code data-v-270c8e4a data-v-270c8e4a>cairo.h</code> 文件，第二行的 <code data-v-270c8e4a data-v-270c8e4a>link</code> 是系统库的编译链接标记，给 Clang 用的，不能随意更改。</p>
<h4 id="添加系统依赖进可执行包里" data-v-270c8e4a data-v-270c8e4a><a href="#%E6%B7%BB%E5%8A%A0%E7%B3%BB%E7%BB%9F%E4%BE%9D%E8%B5%96%E8%BF%9B%E5%8F%AF%E6%89%A7%E8%A1%8C%E5%8C%85%E9%87%8C" aria-hidden="true" tabindex="-1" data-v-270c8e4a data-v-270c8e4a><span class="icon icon-link" data-v-270c8e4a data-v-270c8e4a></span></a>添加系统依赖进可执行包里</h4>
<p data-v-270c8e4a data-v-270c8e4a>编辑 <code data-v-270c8e4a data-v-270c8e4a>Package.swift</code> 文件，添加 <code data-v-270c8e4a data-v-270c8e4a>Foo</code> 进去：</p>
<p data-v-270c8e4a data-v-270c8e4a><img alt="" src="https://user-gold-cdn.xitu.io/2019/12/13/16efde4a67d7416f?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" data-v-270c8e4a data-v-270c8e4a></p>
<p data-v-270c8e4a data-v-270c8e4a>编辑 <code data-v-270c8e4a data-v-270c8e4a>main.swift</code>:</p>
<div class="nuxt-content-highlight" data-v-270c8e4a data-v-270c8e4a><pre class="line-numbers language-text" data-v-270c8e4a data-v-270c8e4a><code data-v-270c8e4a data-v-270c8e4a>import Foo

let surface: OpaquePointer = cairo_image_surface_create(CAIRO_FORMAT_ARGB32, 120, 120)
print(surface)
</code></pre></div>
<p data-v-270c8e4a data-v-270c8e4a>然后编译项目（正常情况下不会报错）：</p>
<div class="nuxt-content-highlight" data-v-270c8e4a data-v-270c8e4a><pre class="line-numbers language-text" data-v-270c8e4a data-v-270c8e4a><code data-v-270c8e4a data-v-270c8e4a>➜  example swift build
[2/2] Linking ./.build/x86_64-apple-macosx/debug/example
➜  example swift run
0x00007f8dfbd007c0
➜  example
</code></pre></div>
<p data-v-270c8e4a data-v-270c8e4a><code data-v-270c8e4a data-v-270c8e4a>module.modulemap</code> 文件中可以添加多个 <code data-v-270c8e4a data-v-270c8e4a>module</code>，所以可以比较方便的添加多个系统库。还有些系统库需要注意的点例如系统库的版本号之类的可以查看 github 上的 <a href="https://github.com/apple/swift-package-manager/blob/master/Documentation/Usage.md#system-libraries-with-optional-dependencies" rel="nofollow noopener noreferrer" target="_blank" data-v-270c8e4a data-v-270c8e4a>说明</a>。</p>
<h3 id="采用-xcode-运行" data-v-270c8e4a data-v-270c8e4a><a href="#%E9%87%87%E7%94%A8-xcode-%E8%BF%90%E8%A1%8C" aria-hidden="true" tabindex="-1" data-v-270c8e4a data-v-270c8e4a><span class="icon icon-link" data-v-270c8e4a data-v-270c8e4a></span></a>采用 Xcode 运行</h3>
<p data-v-270c8e4a data-v-270c8e4a>我们编写代码可以通过 VSCode、Atom 加入各种插件甚至 txt 文本编辑器写，但是肯定还是 Xcode 用起来比较方便，默认 swift build 是不会生成 <code data-v-270c8e4a data-v-270c8e4a>packageName.xcodeproj</code> 这种 Xcode 可以直接打开的工程文件，但是可以通过 <code data-v-270c8e4a data-v-270c8e4a>swift package generate-xcodeproj</code> 命令行生成一个 <code data-v-270c8e4a data-v-270c8e4a>.xcodeproj</code> 文件，然后就可以通过 Xcode 运行该项目了，如果需要配置什么环境变量，则需要通过 <code data-v-270c8e4a data-v-270c8e4a>Build Setting</code> 中的选项配。</p>
<p data-v-270c8e4a data-v-270c8e4a>需要注意的一点事，通过 swift run 和通过 Xcode 启动的是不同的进程，两种方式生成的可执行文件并不是同一个，所以如果需要把可执行文件更新到其他地方的时候注意别弄错了。</p>
<h2 id="解析-package" data-v-270c8e4a data-v-270c8e4a><a href="#%E8%A7%A3%E6%9E%90-package" aria-hidden="true" tabindex="-1" data-v-270c8e4a data-v-270c8e4a><span class="icon icon-link" data-v-270c8e4a data-v-270c8e4a></span></a>解析 Package</h2>
<p data-v-270c8e4a data-v-270c8e4a><code data-v-270c8e4a data-v-270c8e4a>Package</code> 类一般用在 <code data-v-270c8e4a data-v-270c8e4a>Package.swift</code> 里来表标记当前使用的包。<code data-v-270c8e4a data-v-270c8e4a>Package</code> 类里有很多属性，像 <code data-v-270c8e4a data-v-270c8e4a>pkgConfig</code>、<code data-v-270c8e4a data-v-270c8e4a>providers</code> 这些都是上文说到的 Swift 4.2 之前 <code data-v-270c8e4a data-v-270c8e4a>System package</code>所用到的。Swift 5.0 后基本也不会用到了，下面只介绍些平常可能会用到的属性。</p>
<h3 id="packagesupportedplatform" data-v-270c8e4a data-v-270c8e4a><a href="#packagesupportedplatform" aria-hidden="true" tabindex="-1" data-v-270c8e4a data-v-270c8e4a><span class="icon icon-link" data-v-270c8e4a data-v-270c8e4a></span></a>Package.SupportedPlatform</h3>
<p data-v-270c8e4a data-v-270c8e4a>这个 <code data-v-270c8e4a data-v-270c8e4a>Struct</code> 用于设置包的最小依赖平台版本，具体 API 定义可以进入代码文档中查看，下面给出示例：</p>
<div class="nuxt-content-highlight" data-v-270c8e4a data-v-270c8e4a><pre class="line-numbers language-text" data-v-270c8e4a data-v-270c8e4a><code data-v-270c8e4a data-v-270c8e4a>let package = Package(
    name: "example",
    platforms: [.macOS(.v10_10)],
    dependencies: [
         .package(url:"https://github.com/Alamofire/Alamofire.git", .branch("master"))
    ],
    
    targets: [
        .systemLibrary(name: "Foo", path: "Sources/cairo", pkgConfig: "cairo"),
        .target(
            name: "example",
            dependencies: ["Foo", "Alamofire"]),
        .testTarget(
            name: "exampleTests",
            dependencies: ["example"]),
    ]
)
</code></pre></div>
<p data-v-270c8e4a data-v-270c8e4a>需要注意的是虽然这个属性是个数组，但是目的是为了让设置不同平台的最小依赖，如果设置了多个同平台的值进去，就会报错，例如这样：<code data-v-270c8e4a data-v-270c8e4a>[.macOS(.v10_10), .macOS(.v10_11)],</code></p>
<p data-v-270c8e4a data-v-270c8e4a><code data-v-270c8e4a data-v-270c8e4a>error: manifest parse error(s):found multiple declaration for the platform: macos</code></p>
<h3 id="packageproduct" data-v-270c8e4a data-v-270c8e4a><a href="#packageproduct" aria-hidden="true" tabindex="-1" data-v-270c8e4a data-v-270c8e4a><span class="icon icon-link" data-v-270c8e4a data-v-270c8e4a></span></a>Package.Product</h3>
<p data-v-270c8e4a data-v-270c8e4a>Product 是 Package 编译后对外的产品输出，一般可分为两种类型：</p>
<ul data-v-270c8e4a data-v-270c8e4a>
<li data-v-270c8e4a data-v-270c8e4a>可执行文件</li>
<li data-v-270c8e4a data-v-270c8e4a>静态库或者动态库</li>
</ul>
<p data-v-270c8e4a data-v-270c8e4a>具体 <code data-v-270c8e4a data-v-270c8e4a>Package.swift</code> 配置如下</p>
<div class="nuxt-content-highlight" data-v-270c8e4a data-v-270c8e4a><pre class="line-numbers language-swift" data-v-270c8e4a data-v-270c8e4a><code data-v-270c8e4a data-v-270c8e4a><span class="token comment" data-v-270c8e4a data-v-270c8e4a>// swift-tools-version:5.0</span>
<span class="token comment" data-v-270c8e4a data-v-270c8e4a>// The swift-tools-version declares the minimum version of Swift required to build this package.</span>

<span class="token keyword" data-v-270c8e4a data-v-270c8e4a>import</span> <span class="token builtin" data-v-270c8e4a data-v-270c8e4a>PackageDescription</span>

<span class="token keyword" data-v-270c8e4a data-v-270c8e4a>let</span> package <span class="token operator" data-v-270c8e4a data-v-270c8e4a>=</span> <span class="token function" data-v-270c8e4a data-v-270c8e4a>Package</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>(</span>
    name<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token string" data-v-270c8e4a data-v-270c8e4a>"Paper"</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span>
    products<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>[</span>
        <span class="token comment" data-v-270c8e4a data-v-270c8e4a>// Products define the executables and libraries produced by a package, and make them visible to other packages.</span>
        <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token function" data-v-270c8e4a data-v-270c8e4a>executable</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>(</span>name<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token string" data-v-270c8e4a data-v-270c8e4a>"tool"</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span> targets<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>[</span><span class="token string" data-v-270c8e4a data-v-270c8e4a>"tool"</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>]</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>)</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span> <span class="token comment" data-v-270c8e4a data-v-270c8e4a>//需要有目录 Sources/tool</span>
        <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token function" data-v-270c8e4a data-v-270c8e4a>library</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>(</span>name<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token string" data-v-270c8e4a data-v-270c8e4a>"Paper"</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span> targets<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>[</span><span class="token string" data-v-270c8e4a data-v-270c8e4a>"Paper"</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>]</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>)</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span>  <span class="token comment" data-v-270c8e4a data-v-270c8e4a>//需要有目录 Sources/Paper</span>
        <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token function" data-v-270c8e4a data-v-270c8e4a>library</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>(</span>name<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token string" data-v-270c8e4a data-v-270c8e4a>"PaperStatic"</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span> type<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token keyword" data-v-270c8e4a data-v-270c8e4a>static</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span> targets<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>[</span><span class="token string" data-v-270c8e4a data-v-270c8e4a>"Paper"</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>]</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>)</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span>
        <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token function" data-v-270c8e4a data-v-270c8e4a>library</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>(</span>name<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token string" data-v-270c8e4a data-v-270c8e4a>"PaperDynamic"</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span> type<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token keyword" data-v-270c8e4a data-v-270c8e4a>dynamic</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span> targets<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>[</span><span class="token string" data-v-270c8e4a data-v-270c8e4a>"Paper"</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>]</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>)</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span>
    <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>]</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span>
    dependencies<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>[</span>
        <span class="token comment" data-v-270c8e4a data-v-270c8e4a>// Dependencies declare other packages that this package depends on.</span>
        <span class="token comment" data-v-270c8e4a data-v-270c8e4a>// .package(url: /* package url */, from: "1.0.0"),</span>
    <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>]</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span>
    targets<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>[</span>
        <span class="token comment" data-v-270c8e4a data-v-270c8e4a>// Targets are the basic building blocks of a package. A target can define a module or a test suite.</span>
        <span class="token comment" data-v-270c8e4a data-v-270c8e4a>// Targets can depend on other targets in this package, and on products in packages which this package depends on.</span>
        <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token function" data-v-270c8e4a data-v-270c8e4a>target</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>(</span>name<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token string" data-v-270c8e4a data-v-270c8e4a>"Paper"</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span> dependencies<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>[</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>]</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>)</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span>
       <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token function" data-v-270c8e4a data-v-270c8e4a>target</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>(</span>name<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token string" data-v-270c8e4a data-v-270c8e4a>"tool"</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span> dependencies<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>[</span><span class="token string" data-v-270c8e4a data-v-270c8e4a>"Paper"</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>]</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>)</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span>
    <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>]</span>
<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>)</span>
</code></pre></div>
<p data-v-270c8e4a data-v-270c8e4a>当执行完 <code data-v-270c8e4a data-v-270c8e4a>Swift build</code> 之后，就会在 <code data-v-270c8e4a data-v-270c8e4a>.build/debug</code> 下生成对应的可执行文件 <code data-v-270c8e4a data-v-270c8e4a>tool</code> 和静态库 <code data-v-270c8e4a data-v-270c8e4a>libPaperStatic.a</code>、动态库 <code data-v-270c8e4a data-v-270c8e4a>libPaperDynamic.dylib</code>。</p>
<p data-v-270c8e4a data-v-270c8e4a>再来看下 <code data-v-270c8e4a data-v-270c8e4a>Product</code> 这个类的构造（去除了 暂时不关心的 <code data-v-270c8e4a data-v-270c8e4a>encode</code> 等方法）：</p>
<div class="nuxt-content-highlight" data-v-270c8e4a data-v-270c8e4a><pre class="line-numbers language-text" data-v-270c8e4a data-v-270c8e4a><code data-v-270c8e4a data-v-270c8e4a>/// Defines a product in the package.
public class Product : Encodable {

    /// Represents an executable product.
  final public class Executable : PackageDescription.Product {

        /// The names of the targets in this product.
        public let targets: [String]
    }
     /// Represents a library product.
    final public class Library : PackageDescription.Product {

        /// The type of library product.
        public enum LibraryType : String, Encodable {

            case `static`

            case dynamic
        }

        /// The names of the targets in this product.
        public let targets: [String]

        /// The type of the library.
        ///
        /// If the type is unspecified, package manager will automatically choose a type.
        public let type: PackageDescription.Product.Library.LibraryType?

    }

   /// Create a library product.
    public static func library(name: String, type: PackageDescription.Product.Library.LibraryType? = nil, targets: [String]) -> PackageDescription.Product

    /// Create an executable product.
    public static func executable(name: String, targets: [String]) -> PackageDescription.Product
}
</code></pre></div>
<p data-v-270c8e4a data-v-270c8e4a>注意下 <code data-v-270c8e4a data-v-270c8e4a>Library.type</code> 属性，看注释文档上写的是如果没写类型的话，就会自动选一个。苹果推荐如果当前库支持打成静态库或者动态库的任意一种的话，就不要指定类型，让 SwiftPM 在最终编译产品时根据编译设置自动选择静态库或者动态库。</p>
<h3 id="packagedependencies" data-v-270c8e4a data-v-270c8e4a><a href="#packagedependencies" aria-hidden="true" tabindex="-1" data-v-270c8e4a data-v-270c8e4a><span class="icon icon-link" data-v-270c8e4a data-v-270c8e4a></span></a>Package.Dependencies</h3>
<p data-v-270c8e4a data-v-270c8e4a><code data-v-270c8e4a data-v-270c8e4a>Package.dependencies</code> 用于添加包的依赖，一般是包括指向包源的 <code data-v-270c8e4a data-v-270c8e4a>git</code> 路径和版本环境，或指向依赖包的本地路径（至于使用 SVN 路径这种方式没接触过，可能需要自定义一些东西）。</p>
<p data-v-270c8e4a data-v-270c8e4a>在执行 <code data-v-270c8e4a data-v-270c8e4a>Swift build</code> 时会自动执行一个 <code data-v-270c8e4a data-v-270c8e4a>swift package resolve</code> 命令，该命令会解析 <code data-v-270c8e4a data-v-270c8e4a>Package.swift</code> 的依赖，并生成对应的 <code data-v-270c8e4a data-v-270c8e4a>package.resolved</code> 文件，下面有介绍。</p>
<p data-v-270c8e4a data-v-270c8e4a>先简单看下 <code data-v-270c8e4a data-v-270c8e4a>Dependency</code> 的 API</p>
<div class="nuxt-content-highlight" data-v-270c8e4a data-v-270c8e4a><pre class="line-numbers language-text" data-v-270c8e4a data-v-270c8e4a><code data-v-270c8e4a data-v-270c8e4a>public static func package(url: String, from version: PackageDescription.Version) -> PackageDescription.Package.Dependency

public static func package(url: String, _ requirement: PackageDescription.Package.Dependency.Requirement) -> PackageDescription.Package.Dependency

public static func package(url: String, _ range: Range&lt;PackageDescription.Version>) -> PackageDescription.Package.Dependency

public static func package(url: String, _ range: ClosedRange&lt;PackageDescription.Version>) -> PackageDescription.Package.Dependency

/// Add a dependency to a local package on the filesystem.
public static func package(path: String) -> PackageDescription.Package.Dependency
</code></pre></div>
<p data-v-270c8e4a data-v-270c8e4a>先不用一个一个方法看，现在主要说下第二个方法</p>
<p data-v-270c8e4a data-v-270c8e4a><code data-v-270c8e4a data-v-270c8e4a>public static func package(url: String, _ requirement: PackageDescription.Package.Dependency.Requirement) -> PackageDescription.Package.Dependency</code></p>
<p data-v-270c8e4a data-v-270c8e4a>先说它是因为其他几个方法都是这个方法抽象出来的简便创建方式。</p>
<blockquote data-v-270c8e4a data-v-270c8e4a>
<p data-v-270c8e4a data-v-270c8e4a>对于 <code data-v-270c8e4a data-v-270c8e4a>Version</code> 这个结构体，它实现了 <code data-v-270c8e4a data-v-270c8e4a>ExpressibleByStringLiteral</code>，所以可以直接用字符串字面量表示，同时也实现了 <code data-v-270c8e4a data-v-270c8e4a>Comparable</code> 协议，所以可以直接用 <code data-v-270c8e4a data-v-270c8e4a>&lt;</code> 比较大小，用 <code data-v-270c8e4a data-v-270c8e4a>..&lt;</code> 和 <code data-v-270c8e4a data-v-270c8e4a>...</code> 表示范围。</p>
</blockquote>
<p data-v-270c8e4a data-v-270c8e4a>看下 <code data-v-270c8e4a data-v-270c8e4a>Package.Dependency.Requirement</code></p>
<div class="nuxt-content-highlight" data-v-270c8e4a data-v-270c8e4a><pre class="line-numbers language-swift" data-v-270c8e4a data-v-270c8e4a><code data-v-270c8e4a data-v-270c8e4a><span class="token keyword" data-v-270c8e4a data-v-270c8e4a>public</span> <span class="token keyword" data-v-270c8e4a data-v-270c8e4a>enum</span> <span class="token builtin" data-v-270c8e4a data-v-270c8e4a>Requirement</span> <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>{</span>
  <span class="token keyword" data-v-270c8e4a data-v-270c8e4a>case</span> <span class="token function" data-v-270c8e4a data-v-270c8e4a>_exactItem</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>(</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>PackageDescription</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>Version</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>)</span>
  <span class="token keyword" data-v-270c8e4a data-v-270c8e4a>case</span> <span class="token function" data-v-270c8e4a data-v-270c8e4a>_rangeItem</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>(</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>Range</span><span class="token operator" data-v-270c8e4a data-v-270c8e4a>&lt;</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>PackageDescription</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>Version</span><span class="token operator" data-v-270c8e4a data-v-270c8e4a>></span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>)</span>
  <span class="token keyword" data-v-270c8e4a data-v-270c8e4a>case</span> <span class="token function" data-v-270c8e4a data-v-270c8e4a>_revisionItem</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>(</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>String</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>)</span>
  <span class="token keyword" data-v-270c8e4a data-v-270c8e4a>case</span> <span class="token function" data-v-270c8e4a data-v-270c8e4a>_branchItem</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>(</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>String</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>)</span>
  <span class="token keyword" data-v-270c8e4a data-v-270c8e4a>case</span> _localPackageItem
<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>}</span>

<span class="token keyword" data-v-270c8e4a data-v-270c8e4a>extension</span> <span class="token builtin" data-v-270c8e4a data-v-270c8e4a>Package</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>Dependency</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>Requirement</span> <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token builtin" data-v-270c8e4a data-v-270c8e4a>Encodable</span> <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>{</span>

    <span class="token comment" data-v-270c8e4a data-v-270c8e4a>/// The requirement is specified by an exact version.</span>
    <span class="token comment" data-v-270c8e4a data-v-270c8e4a>/// example: .exact("1.2.3")</span>
    <span class="token keyword" data-v-270c8e4a data-v-270c8e4a>public</span> <span class="token keyword" data-v-270c8e4a data-v-270c8e4a>static</span> <span class="token keyword" data-v-270c8e4a data-v-270c8e4a>func</span> <span class="token function" data-v-270c8e4a data-v-270c8e4a>exact</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>(</span><span class="token number" data-v-270c8e4a data-v-270c8e4a>_</span> version<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token builtin" data-v-270c8e4a data-v-270c8e4a>PackageDescription</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>Version</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>)</span> <span class="token operator" data-v-270c8e4a data-v-270c8e4a>-</span><span class="token operator" data-v-270c8e4a data-v-270c8e4a>></span> <span class="token builtin" data-v-270c8e4a data-v-270c8e4a>PackageDescription</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>Package</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>Dependency</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>Requirement</span>

    <span class="token comment" data-v-270c8e4a data-v-270c8e4a>/// The requirement is specified by a source control revision.</span>
    <span class="token comment" data-v-270c8e4a data-v-270c8e4a>/// example: .revision("e74b07278b926c9ec6f9643455ea00d1ce04a021")</span>
    <span class="token keyword" data-v-270c8e4a data-v-270c8e4a>public</span> <span class="token keyword" data-v-270c8e4a data-v-270c8e4a>static</span> <span class="token keyword" data-v-270c8e4a data-v-270c8e4a>func</span> <span class="token function" data-v-270c8e4a data-v-270c8e4a>revision</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>(</span><span class="token number" data-v-270c8e4a data-v-270c8e4a>_</span> ref<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token builtin" data-v-270c8e4a data-v-270c8e4a>String</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>)</span> <span class="token operator" data-v-270c8e4a data-v-270c8e4a>-</span><span class="token operator" data-v-270c8e4a data-v-270c8e4a>></span> <span class="token builtin" data-v-270c8e4a data-v-270c8e4a>PackageDescription</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>Package</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>Dependency</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>Requirement</span>

    <span class="token comment" data-v-270c8e4a data-v-270c8e4a>/// The requirement is specified by a source control branch.</span>
    <span class="token comment" data-v-270c8e4a data-v-270c8e4a>/// example: .branch("develop")</span>
    <span class="token keyword" data-v-270c8e4a data-v-270c8e4a>public</span> <span class="token keyword" data-v-270c8e4a data-v-270c8e4a>static</span> <span class="token keyword" data-v-270c8e4a data-v-270c8e4a>func</span> <span class="token function" data-v-270c8e4a data-v-270c8e4a>branch</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>(</span><span class="token number" data-v-270c8e4a data-v-270c8e4a>_</span> name<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token builtin" data-v-270c8e4a data-v-270c8e4a>String</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>)</span> <span class="token operator" data-v-270c8e4a data-v-270c8e4a>-</span><span class="token operator" data-v-270c8e4a data-v-270c8e4a>></span> <span class="token builtin" data-v-270c8e4a data-v-270c8e4a>PackageDescription</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>Package</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>Dependency</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>Requirement</span>

    <span class="token comment" data-v-270c8e4a data-v-270c8e4a>/// Creates a specified for a range starting at the given lower bound</span>
    <span class="token comment" data-v-270c8e4a data-v-270c8e4a>/// and going upto next major version.</span>
    <span class="token comment" data-v-270c8e4a data-v-270c8e4a>/// example: .upToNextMajor(from: "1.2.3")</span>
    <span class="token keyword" data-v-270c8e4a data-v-270c8e4a>public</span> <span class="token keyword" data-v-270c8e4a data-v-270c8e4a>static</span> <span class="token keyword" data-v-270c8e4a data-v-270c8e4a>func</span> <span class="token function" data-v-270c8e4a data-v-270c8e4a>upToNextMajor</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>(</span>from version<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token builtin" data-v-270c8e4a data-v-270c8e4a>PackageDescription</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>Version</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>)</span> <span class="token operator" data-v-270c8e4a data-v-270c8e4a>-</span><span class="token operator" data-v-270c8e4a data-v-270c8e4a>></span> <span class="token builtin" data-v-270c8e4a data-v-270c8e4a>PackageDescription</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>Package</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>Dependency</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>Requirement</span>

    <span class="token comment" data-v-270c8e4a data-v-270c8e4a>/// Creates a specified for a range starting at the given lower bound</span>
    <span class="token comment" data-v-270c8e4a data-v-270c8e4a>/// and going upto next minor version.</span>
   <span class="token comment" data-v-270c8e4a data-v-270c8e4a>/// example: .upToNextMinor(from: "1.2.3")</span>
    <span class="token keyword" data-v-270c8e4a data-v-270c8e4a>public</span> <span class="token keyword" data-v-270c8e4a data-v-270c8e4a>static</span> <span class="token keyword" data-v-270c8e4a data-v-270c8e4a>func</span> <span class="token function" data-v-270c8e4a data-v-270c8e4a>upToNextMinor</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>(</span>from version<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token builtin" data-v-270c8e4a data-v-270c8e4a>PackageDescription</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>Version</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>)</span> <span class="token operator" data-v-270c8e4a data-v-270c8e4a>-</span><span class="token operator" data-v-270c8e4a data-v-270c8e4a>></span> <span class="token builtin" data-v-270c8e4a data-v-270c8e4a>PackageDescription</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>Package</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>Dependency</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>Requirement</span>
<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>}</span>
</code></pre></div>
<p data-v-270c8e4a data-v-270c8e4a>直接从枚举的定义中就可以看出 <code data-v-270c8e4a data-v-270c8e4a>Package.dependencies</code> 支持如下五种方式：</p>
<ul data-v-270c8e4a data-v-270c8e4a>
<li data-v-270c8e4a data-v-270c8e4a>git 源 + 确定的版本号</li>
<li data-v-270c8e4a data-v-270c8e4a>git 源 + 版本区间</li>
<li data-v-270c8e4a data-v-270c8e4a>git 源 + Commit 号</li>
<li data-v-270c8e4a data-v-270c8e4a>git 源 + 分支名</li>
<li data-v-270c8e4a data-v-270c8e4a>本地路径</li>
</ul>
<p data-v-270c8e4a data-v-270c8e4a>对于 <code data-v-270c8e4a data-v-270c8e4a>extension</code> 里的几个方法也只是一个便捷函数，方法注释里已经有相应的使用示例，<code data-v-270c8e4a data-v-270c8e4a>upToNextMajor</code> 表示从某个版本到下个主要版本之前，比如 <code data-v-270c8e4a data-v-270c8e4a>.upToNextMajor(from: "1.2.3")</code> 表示 SwiftPM 选择的版本可能是 <code data-v-270c8e4a data-v-270c8e4a>1.2.3</code> 或者 <code data-v-270c8e4a data-v-270c8e4a>1.3.5</code>，但是不会选择 <code data-v-270c8e4a data-v-270c8e4a>2.0.0</code> 以及以上版本。<code data-v-270c8e4a data-v-270c8e4a>upToNextMinor</code> 指的是次要版本，也就是第二位数字，这两个方法也都会转为 <code data-v-270c8e4a data-v-270c8e4a>_rangeItem(Range&lt;PackageDescription.Version>)</code> 这个枚举值。</p>
<p data-v-270c8e4a data-v-270c8e4a>再回头看下之前说的先不用管的 <code data-v-270c8e4a data-v-270c8e4a>Package.Dependency</code> 的几个 <code data-v-270c8e4a data-v-270c8e4a>API</code>，它们内部也是转化成这个 <code data-v-270c8e4a data-v-270c8e4a>Requirement</code> 这个枚举的（不信的自己去看源码），</p>
<ul data-v-270c8e4a data-v-270c8e4a>
<li data-v-270c8e4a data-v-270c8e4a>
<p data-v-270c8e4a data-v-270c8e4a><code data-v-270c8e4a data-v-270c8e4a>public static func package(url: String, from version: PackageDescription.Version) -> PackageDescription.Package.Dependency</code></p>
<p data-v-270c8e4a data-v-270c8e4a>这个方法是通过 <code data-v-270c8e4a data-v-270c8e4a>upToNextMajor</code> 转换成 <code data-v-270c8e4a data-v-270c8e4a>Requirement.</code>_rangeItem，这就意味着这个方法会选择某个版本号到下个主版本号之前的版本</p>
</li>
<li data-v-270c8e4a data-v-270c8e4a>
<p data-v-270c8e4a data-v-270c8e4a><code data-v-270c8e4a data-v-270c8e4a>public static func package(url: String, _ range: Range&lt;PackageDescription.Version>) -> PackageDescription.Package.Dependency</code></p>
<p data-v-270c8e4a data-v-270c8e4a>这个方法是直接转换成 <code data-v-270c8e4a data-v-270c8e4a>Requirement.</code>_rangeItem，所以它可是无视主版本号、次版本号控制这种隐形规则的</p>
</li>
<li data-v-270c8e4a data-v-270c8e4a>
<p data-v-270c8e4a data-v-270c8e4a><code data-v-270c8e4a data-v-270c8e4a>public static func package(path: String) -> PackageDescription.Package.Dependency</code></p>
<p data-v-270c8e4a data-v-270c8e4a>这个方法是转换成 <code data-v-270c8e4a data-v-270c8e4a>Requirement._localPackageItem</code>，</p>
</li>
</ul>
<p data-v-270c8e4a data-v-270c8e4a>看完了上面的介绍，平常的使用方式如下所示：</p>
<div class="nuxt-content-highlight" data-v-270c8e4a data-v-270c8e4a><pre class="line-numbers language-text" data-v-270c8e4a data-v-270c8e4a><code data-v-270c8e4a data-v-270c8e4a>.package(url: "https://github.com/Alamofire/Alamofire.git", .exact("1.2.3")),
.package(url:"https://github.com/Alamofire/Alamofire.git", .branch("master")),
.package(url:"https://github.com/Alamofire/Alamofire.git", from: "1.2.3"),
.package(url: "https://github.com/Alamofire/Alamofire.git", .revision("e74b07278b926c9ec6f9643455ea00d1ce04a021"),
.package(url: "https://github.com/Alamofire/Alamofire.git", "1.2.3"..."4.1.3"),
.package(path: "../Foo"),
</code></pre></div>
<h3 id="packagetarget" data-v-270c8e4a data-v-270c8e4a><a href="#packagetarget" aria-hidden="true" tabindex="-1" data-v-270c8e4a data-v-270c8e4a><span class="icon icon-link" data-v-270c8e4a data-v-270c8e4a></span></a>Package.Target</h3>
<p data-v-270c8e4a data-v-270c8e4a><code data-v-270c8e4a data-v-270c8e4a>target</code> 是 Package 的基本构件，和 <code data-v-270c8e4a data-v-270c8e4a>xcodeproject</code> 一样，Package 可以有多个 <code data-v-270c8e4a data-v-270c8e4a>target</code>。</p>
<p data-v-270c8e4a data-v-270c8e4a><code data-v-270c8e4a data-v-270c8e4a>target</code> 分为三种类型：常规型、测试类型、系统库类型。分别对应下面几个快捷创建方式：</p>
<div class="nuxt-content-highlight" data-v-270c8e4a data-v-270c8e4a><pre class="line-numbers language-swift" data-v-270c8e4a data-v-270c8e4a><code data-v-270c8e4a data-v-270c8e4a><span class="token comment" data-v-270c8e4a data-v-270c8e4a>/// The type of this target.</span>
    <span class="token keyword" data-v-270c8e4a data-v-270c8e4a>public</span> <span class="token keyword" data-v-270c8e4a data-v-270c8e4a>enum</span> <span class="token builtin" data-v-270c8e4a data-v-270c8e4a>TargetType</span> <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token builtin" data-v-270c8e4a data-v-270c8e4a>String</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span> <span class="token builtin" data-v-270c8e4a data-v-270c8e4a>Encodable</span> <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>{</span>
        <span class="token keyword" data-v-270c8e4a data-v-270c8e4a>case</span> regular
        <span class="token keyword" data-v-270c8e4a data-v-270c8e4a>case</span> test
        <span class="token keyword" data-v-270c8e4a data-v-270c8e4a>case</span> system
    <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>}</span>

<span class="token keyword" data-v-270c8e4a data-v-270c8e4a>public</span> <span class="token keyword" data-v-270c8e4a data-v-270c8e4a>static</span> <span class="token keyword" data-v-270c8e4a data-v-270c8e4a>func</span> <span class="token function" data-v-270c8e4a data-v-270c8e4a>target</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>(</span>name<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token builtin" data-v-270c8e4a data-v-270c8e4a>String</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span> dependencies<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>[</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>PackageDescription</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>Target</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>Dependency</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>]</span> <span class="token operator" data-v-270c8e4a data-v-270c8e4a>=</span> <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>[</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>]</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span> path<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token builtin" data-v-270c8e4a data-v-270c8e4a>String</span><span class="token operator" data-v-270c8e4a data-v-270c8e4a>?</span> <span class="token operator" data-v-270c8e4a data-v-270c8e4a>=</span> <span class="token constant" data-v-270c8e4a data-v-270c8e4a>nil</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span> exclude<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>[</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>String</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>]</span> <span class="token operator" data-v-270c8e4a data-v-270c8e4a>=</span> <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>[</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>]</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span> sources<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>[</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>String</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>]</span><span class="token operator" data-v-270c8e4a data-v-270c8e4a>?</span> <span class="token operator" data-v-270c8e4a data-v-270c8e4a>=</span> <span class="token constant" data-v-270c8e4a data-v-270c8e4a>nil</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span> publicHeadersPath<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token builtin" data-v-270c8e4a data-v-270c8e4a>String</span><span class="token operator" data-v-270c8e4a data-v-270c8e4a>?</span> <span class="token operator" data-v-270c8e4a data-v-270c8e4a>=</span> <span class="token constant" data-v-270c8e4a data-v-270c8e4a>nil</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span> cSettings<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>[</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>PackageDescription</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>CSetting</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>]</span><span class="token operator" data-v-270c8e4a data-v-270c8e4a>?</span> <span class="token operator" data-v-270c8e4a data-v-270c8e4a>=</span> <span class="token constant" data-v-270c8e4a data-v-270c8e4a>nil</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span> cxxSettings<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>[</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>PackageDescription</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>CXXSetting</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>]</span><span class="token operator" data-v-270c8e4a data-v-270c8e4a>?</span> <span class="token operator" data-v-270c8e4a data-v-270c8e4a>=</span> <span class="token constant" data-v-270c8e4a data-v-270c8e4a>nil</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span> swiftSettings<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>[</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>PackageDescription</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>SwiftSetting</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>]</span><span class="token operator" data-v-270c8e4a data-v-270c8e4a>?</span> <span class="token operator" data-v-270c8e4a data-v-270c8e4a>=</span> <span class="token constant" data-v-270c8e4a data-v-270c8e4a>nil</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span> linkerSettings<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>[</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>PackageDescription</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>LinkerSetting</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>]</span><span class="token operator" data-v-270c8e4a data-v-270c8e4a>?</span> <span class="token operator" data-v-270c8e4a data-v-270c8e4a>=</span> <span class="token constant" data-v-270c8e4a data-v-270c8e4a>nil</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>)</span> <span class="token operator" data-v-270c8e4a data-v-270c8e4a>-</span><span class="token operator" data-v-270c8e4a data-v-270c8e4a>></span> <span class="token builtin" data-v-270c8e4a data-v-270c8e4a>PackageDescription</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>Target</span>

<span class="token keyword" data-v-270c8e4a data-v-270c8e4a>public</span> <span class="token keyword" data-v-270c8e4a data-v-270c8e4a>static</span> <span class="token keyword" data-v-270c8e4a data-v-270c8e4a>func</span> <span class="token function" data-v-270c8e4a data-v-270c8e4a>testTarget</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>(</span>name<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token builtin" data-v-270c8e4a data-v-270c8e4a>String</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span> dependencies<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>[</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>PackageDescription</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>Target</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>Dependency</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>]</span> <span class="token operator" data-v-270c8e4a data-v-270c8e4a>=</span> <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>[</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>]</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span> path<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token builtin" data-v-270c8e4a data-v-270c8e4a>String</span><span class="token operator" data-v-270c8e4a data-v-270c8e4a>?</span> <span class="token operator" data-v-270c8e4a data-v-270c8e4a>=</span> <span class="token constant" data-v-270c8e4a data-v-270c8e4a>nil</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span> exclude<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>[</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>String</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>]</span> <span class="token operator" data-v-270c8e4a data-v-270c8e4a>=</span> <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>[</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>]</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span> sources<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>[</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>String</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>]</span><span class="token operator" data-v-270c8e4a data-v-270c8e4a>?</span> <span class="token operator" data-v-270c8e4a data-v-270c8e4a>=</span> <span class="token constant" data-v-270c8e4a data-v-270c8e4a>nil</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span> cSettings<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>[</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>PackageDescription</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>CSetting</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>]</span><span class="token operator" data-v-270c8e4a data-v-270c8e4a>?</span> <span class="token operator" data-v-270c8e4a data-v-270c8e4a>=</span> <span class="token constant" data-v-270c8e4a data-v-270c8e4a>nil</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span> cxxSettings<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>[</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>PackageDescription</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>CXXSetting</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>]</span><span class="token operator" data-v-270c8e4a data-v-270c8e4a>?</span> <span class="token operator" data-v-270c8e4a data-v-270c8e4a>=</span> <span class="token constant" data-v-270c8e4a data-v-270c8e4a>nil</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span> swiftSettings<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>[</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>PackageDescription</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>SwiftSetting</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>]</span><span class="token operator" data-v-270c8e4a data-v-270c8e4a>?</span> <span class="token operator" data-v-270c8e4a data-v-270c8e4a>=</span> <span class="token constant" data-v-270c8e4a data-v-270c8e4a>nil</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span> linkerSettings<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>[</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>PackageDescription</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>LinkerSetting</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>]</span><span class="token operator" data-v-270c8e4a data-v-270c8e4a>?</span> <span class="token operator" data-v-270c8e4a data-v-270c8e4a>=</span> <span class="token constant" data-v-270c8e4a data-v-270c8e4a>nil</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>)</span> <span class="token operator" data-v-270c8e4a data-v-270c8e4a>-</span><span class="token operator" data-v-270c8e4a data-v-270c8e4a>></span> <span class="token builtin" data-v-270c8e4a data-v-270c8e4a>PackageDescription</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>Target</span>

<span class="token keyword" data-v-270c8e4a data-v-270c8e4a>public</span> <span class="token keyword" data-v-270c8e4a data-v-270c8e4a>static</span> <span class="token keyword" data-v-270c8e4a data-v-270c8e4a>func</span> <span class="token function" data-v-270c8e4a data-v-270c8e4a>systemLibrary</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>(</span>name<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token builtin" data-v-270c8e4a data-v-270c8e4a>String</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span> path<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token builtin" data-v-270c8e4a data-v-270c8e4a>String</span><span class="token operator" data-v-270c8e4a data-v-270c8e4a>?</span> <span class="token operator" data-v-270c8e4a data-v-270c8e4a>=</span> <span class="token constant" data-v-270c8e4a data-v-270c8e4a>nil</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span> pkgConfig<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token builtin" data-v-270c8e4a data-v-270c8e4a>String</span><span class="token operator" data-v-270c8e4a data-v-270c8e4a>?</span> <span class="token operator" data-v-270c8e4a data-v-270c8e4a>=</span> <span class="token constant" data-v-270c8e4a data-v-270c8e4a>nil</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>,</span> providers<span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>:</span> <span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>[</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>PackageDescription</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>SystemPackageProvider</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>]</span><span class="token operator" data-v-270c8e4a data-v-270c8e4a>?</span> <span class="token operator" data-v-270c8e4a data-v-270c8e4a>=</span> <span class="token constant" data-v-270c8e4a data-v-270c8e4a>nil</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>)</span> <span class="token operator" data-v-270c8e4a data-v-270c8e4a>-</span><span class="token operator" data-v-270c8e4a data-v-270c8e4a>></span> <span class="token builtin" data-v-270c8e4a data-v-270c8e4a>PackageDescription</span><span class="token punctuation" data-v-270c8e4a data-v-270c8e4a>.</span><span class="token builtin" data-v-270c8e4a data-v-270c8e4a>Target</span><span class="token operator" data-v-270c8e4a data-v-270c8e4a>=</span>
</code></pre></div>
<p data-v-270c8e4a data-v-270c8e4a>先介绍下 <code data-v-270c8e4a data-v-270c8e4a>Target</code> 的几个主要的属性</p>
<ul data-v-270c8e4a data-v-270c8e4a>
<li data-v-270c8e4a data-v-270c8e4a>name：名字</li>
<li data-v-270c8e4a data-v-270c8e4a>dependencies：依赖项，注意不要和上面的 <code data-v-270c8e4a data-v-270c8e4a>Package.Dependency</code> 搞混了，不是一个东西，这里可以依赖上面 <code data-v-270c8e4a data-v-270c8e4a>Package.Dependency</code> 的东西或者依赖另一个 <code data-v-270c8e4a data-v-270c8e4a>target</code>。所以这里只需要写 Package 或者 Target 的名字字符串（<code data-v-270c8e4a data-v-270c8e4a>Target.Dependency</code> 这个枚举也实现了 <code data-v-270c8e4a data-v-270c8e4a>ExpressibleByStringLiteral</code>）。</li>
<li data-v-270c8e4a data-v-270c8e4a>path：<code data-v-270c8e4a data-v-270c8e4a>target</code> 的路径，默认的话是 <code data-v-270c8e4a data-v-270c8e4a>[PackageRoot]/Sources/[TargetName]</code>。</li>
<li data-v-270c8e4a data-v-270c8e4a>source：源文件路径，默认 <code data-v-270c8e4a data-v-270c8e4a>TargetName</code> 文件夹下都是源代码文件，会递归搜索</li>
<li data-v-270c8e4a data-v-270c8e4a>exclude：需要被排除在外的文件 / 文件夹，这些文件不会参与编译。</li>
<li data-v-270c8e4a data-v-270c8e4a>publicHeadersPath：C 家族库的公共头文件地址。</li>
<li data-v-270c8e4a data-v-270c8e4a>swiftSettings：定义一个用于特定环境（例如 Debug）的宏，需要设置的话可以去 <code data-v-270c8e4a data-v-270c8e4a>API</code> 上研究下</li>
<li data-v-270c8e4a data-v-270c8e4a>linkerSettings：用于链接一些系统库</li>
</ul>
<p data-v-270c8e4a data-v-270c8e4a>对于常规型 <code data-v-270c8e4a data-v-270c8e4a>target</code> ，可以包含 Swift 代码文件或者 C 家族的代码文件，但是不能在一个 <code data-v-270c8e4a data-v-270c8e4a>target</code> 中混合两种语言。和上面说过的类似，如果 <code data-v-270c8e4a data-v-270c8e4a>target</code> 的代码文件中含有 <code data-v-270c8e4a data-v-270c8e4a>main.swift</code>，<code data-v-270c8e4a data-v-270c8e4a>main.c</code>，<code data-v-270c8e4a data-v-270c8e4a>main.cpp</code> 文件，这个 <code data-v-270c8e4a data-v-270c8e4a>target</code> 就会被编译成可执行文件，否则就会被编译成静态库或者动态库。</p>
<p data-v-270c8e4a data-v-270c8e4a>系统库的 <code data-v-270c8e4a data-v-270c8e4a>target</code> 上面介绍 Package 时已经使用过了，需要注意的是 <code data-v-270c8e4a data-v-270c8e4a>module.modulemap</code> 文件中的路径配置，主要是用于找寻系统库的 <code data-v-270c8e4a data-v-270c8e4a>.pc</code> 文件，<code data-v-270c8e4a data-v-270c8e4a>.pc</code> 文件里有系统库的具体配置。</p>
<h2 id="需要注意的小点" data-v-270c8e4a data-v-270c8e4a><a href="#%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E5%B0%8F%E7%82%B9" aria-hidden="true" tabindex="-1" data-v-270c8e4a data-v-270c8e4a><span class="icon icon-link" data-v-270c8e4a data-v-270c8e4a></span></a>需要注意的小点</h2>
<h3 id="通过预处理命令区分编译环境" data-v-270c8e4a data-v-270c8e4a><a href="#%E9%80%9A%E8%BF%87%E9%A2%84%E5%A4%84%E7%90%86%E5%91%BD%E4%BB%A4%E5%8C%BA%E5%88%86%E7%BC%96%E8%AF%91%E7%8E%AF%E5%A2%83" aria-hidden="true" tabindex="-1" data-v-270c8e4a data-v-270c8e4a><span class="icon icon-link" data-v-270c8e4a data-v-270c8e4a></span></a>通过预处理命令区分编译环境</h3>
<p data-v-270c8e4a data-v-270c8e4a>上文也说过，Package 可以通过 SwiftPM 执行 <code data-v-270c8e4a data-v-270c8e4a>swift build</code> 进行编译，也可以通过生成 <code data-v-270c8e4a data-v-270c8e4a>xcodeproj</code> 从而通过 Xcode 进行编译，两者的编译环境并不相同，生成的可执行文件也不是同一个地址，所以可以通过 <code data-v-270c8e4a data-v-270c8e4a>SWIFT_PACKAGE</code> 区分编译环境</p>
<div class="nuxt-content-highlight" data-v-270c8e4a data-v-270c8e4a><pre class="line-numbers language-text" data-v-270c8e4a data-v-270c8e4a><code data-v-270c8e4a data-v-270c8e4a>#if SWIFT_PACKAGE
import Foundation
#endif
</code></pre></div>
<h3 id="选择特定-swift-版本的-package" data-v-270c8e4a data-v-270c8e4a><a href="#%E9%80%89%E6%8B%A9%E7%89%B9%E5%AE%9A-swift-%E7%89%88%E6%9C%AC%E7%9A%84-package" aria-hidden="true" tabindex="-1" data-v-270c8e4a data-v-270c8e4a><span class="icon icon-link" data-v-270c8e4a data-v-270c8e4a></span></a>选择特定 Swift 版本的 Package</h3>
<p data-v-270c8e4a data-v-270c8e4a>SwiftPM 设计时就支持每个包工作在不同的 Swift 语言版本和 SwiftPM 版本，看了官方的 <a href="https://github.com/apple/swift-package-manager/blob/master/Documentation/Usage.md#handling-version-specific-logic" rel="nofollow noopener noreferrer" target="_blank" data-v-270c8e4a data-v-270c8e4a>文档</a> 之后，还是有点不清不楚 (我自己也没试过)，觉得下面我的理解有问题的可以自行阅览刚才的链接文档。</p>
<p data-v-270c8e4a data-v-270c8e4a>先介绍下如何选择特定 Swift 语言版本的包。举个例子，工具包 <code data-v-270c8e4a data-v-270c8e4a>Foo</code> 在某个迭代中已经适配升级成 Swift 5.0 ，但是有些项目还是在用 Swift 3.0，所以 <code data-v-270c8e4a data-v-270c8e4a>Foo</code> 还得支持 Swift 3.0。对于这种包功能相同但是 Swift 语言版本号不同的情况，可以才用 tag 后缀的形式，例如 <code data-v-270c8e4a data-v-270c8e4a>[1.0.0,1.2.0@swift-3, 1.3.0]</code>，这样一来，SwiftP··M 3.0 在查找 <code data-v-270c8e4a data-v-270c8e4a>Foo</code> 库的可用版本时，就会直接忽略 <code data-v-270c8e4a data-v-270c8e4a>1.0.0,1.3.0</code>，而去直接寻找 <code data-v-270c8e4a data-v-270c8e4a>1.2.3@swift-3</code>。</p>
<p data-v-270c8e4a data-v-270c8e4a>选择特定 SwiftPM 版本的包。举个例子，我写了一个工具包，支持 Swift 3.0 和 Swift 4.0、Swift 4.2，但是 SwiftPM 在 3.0 、4.0、4.2 的 API 又不一样，这就导致被依赖的时候需要不同的 <code data-v-270c8e4a data-v-270c8e4a>Package.swift</code>，所以 SwiftPM 提供了一个这样的写法：<code data-v-270c8e4a data-v-270c8e4a>Package@swift-3.swift</code>。我们熟知的 <code data-v-270c8e4a data-v-270c8e4a>Alamofire</code> 就是这样写的，在 <code data-v-270c8e4a data-v-270c8e4a>Alamofire 4.8</code> 中就提供了如下三个 <code data-v-270c8e4a data-v-270c8e4a>Package.swift</code> 版本：</p>
<ul data-v-270c8e4a data-v-270c8e4a>
<li data-v-270c8e4a data-v-270c8e4a>Package.swift (tool-version: 4.2)</li>
<li data-v-270c8e4a data-v-270c8e4a><a href="mailto:Package@swift-3.swift" data-v-270c8e4a data-v-270c8e4a>Package@swift-3.swift</a> (tool-version: 3.0)</li>
<li data-v-270c8e4a data-v-270c8e4a><a href="mailto:Package@swift-4.swift" data-v-270c8e4a data-v-270c8e4a>Package@swift-4.swift</a> (tool-version: 4.0)</li>
</ul>
<p data-v-270c8e4a data-v-270c8e4a>这样当 Swift 4.2 的项目依赖 <code data-v-270c8e4a data-v-270c8e4a>Alamofire</code> 时，会直接找到 <code data-v-270c8e4a data-v-270c8e4a>Package.swift</code>，当 Swift 3.0 的项目依赖它时，找到 <code data-v-270c8e4a data-v-270c8e4a>Package.swift</code> 发现 <code data-v-270c8e4a data-v-270c8e4a>tool-version</code>版本不匹配，就会再去找与 Swift 3.0 兼容的 <code data-v-270c8e4a data-v-270c8e4a>Package@swift-3.swift</code>。</p>
<p data-v-270c8e4a data-v-270c8e4a>无论上上面哪两种方式，都是 Swift 5.0 API 稳定之前的中间产物，以后废不废弃这些写法也不一定，苹果的文档里也说除非必要不然希望我们这样做，所以新开的 Swift 5.0 起步的项目也不需要关心这些。</p>
<h3 id="packageresolved" data-v-270c8e4a data-v-270c8e4a><a href="#packageresolved" aria-hidden="true" tabindex="-1" data-v-270c8e4a data-v-270c8e4a><span class="icon icon-link" data-v-270c8e4a data-v-270c8e4a></span></a>Package.resolved</h3>
<p data-v-270c8e4a data-v-270c8e4a>和大多数包管理工具类似，SwiftPM 也会生成一个 <code data-v-270c8e4a data-v-270c8e4a>Package.resolved</code> 文件来记录依赖项的解析结果，当执行依赖解析的时候，会优先解析这个文件，不存在时才会解析 <code data-v-270c8e4a data-v-270c8e4a>Package.swift</code>。这一点和 Cocoapods 的 <code data-v-270c8e4a data-v-270c8e4a>podfile.lock</code> 文件类似，有的项目进行工程管理时为了能每个成员自由的执行 Update 操作，都会在上传时把它忽略掉。</p>
<p data-v-270c8e4a data-v-270c8e4a><code data-v-270c8e4a data-v-270c8e4a>swift package resolve</code> 命令会解析项目的依赖，如果之前有 resolve 文件，但是和本地的 <code data-v-270c8e4a data-v-270c8e4a>Package.swift</code> 的配置有不对应（小组成员提交了更改），该命令会更新包依赖。平常使用的 <code data-v-270c8e4a data-v-270c8e4a>swift build</code> 等命令中都会含有该命令。</p>
<h3 id="build-configuration" data-v-270c8e4a data-v-270c8e4a><a href="#build-configuration" aria-hidden="true" tabindex="-1" data-v-270c8e4a data-v-270c8e4a><span class="icon icon-link" data-v-270c8e4a data-v-270c8e4a></span></a>Build Configuration</h3>
<p data-v-270c8e4a data-v-270c8e4a>同大多数苹果的软件设计类似，SwiftPM 编译时也有 Debug/Realease 之分，可以通过 <code data-v-270c8e4a data-v-270c8e4a>swift build -c debug/realease</code> 进行编译，具体的区别主要是代码的编译优化和调试信息。默认不加参数时下是 debug 环境。</p>
<h3 id="swift-package-vs-swift-module" data-v-270c8e4a data-v-270c8e4a><a href="#swift-package-vs-swift-module" aria-hidden="true" tabindex="-1" data-v-270c8e4a data-v-270c8e4a><span class="icon icon-link" data-v-270c8e4a data-v-270c8e4a></span></a>Swift Package VS Swift Module</h3>
<p data-v-270c8e4a data-v-270c8e4a>Swift Module 是一个代码集合体，有自己的访问控制。而 Swift Package 是 SwiftPM 中所使用的，由代码文件和 <code data-v-270c8e4a data-v-270c8e4a>Package.swift</code> 构成，Swift Package 可以包含多个 Swift Module，而且并不局限于 Swift 语言（比如 C/C++ 语言）。从某种意义上说 Swift Package 类似 Xcode.project，Swift Module 类似于 Xcode.target。</p>
<h2 id="swift-evolution-ideas" data-v-270c8e4a data-v-270c8e4a><a href="#swift-evolution-ideas" aria-hidden="true" tabindex="-1" data-v-270c8e4a data-v-270c8e4a><span class="icon icon-link" data-v-270c8e4a data-v-270c8e4a></span></a>Swift Evolution Ideas</h2>
<p data-v-270c8e4a data-v-270c8e4a>下面是一些 SwiftPM 开发者们在考虑的优化项，顺序不代表优先级，目前除了支持资源文件这一项，其他的暂时还没安排到具体的代码中去。</p>
<h3 id="mirror-and-fork-support" data-v-270c8e4a data-v-270c8e4a><a href="#mirror-and-fork-support" aria-hidden="true" tabindex="-1" data-v-270c8e4a data-v-270c8e4a><span class="icon icon-link" data-v-270c8e4a data-v-270c8e4a></span></a>Mirror and Fork Support</h3>
<p data-v-270c8e4a data-v-270c8e4a>Mirror：我们构建 Package 肯定希望它的依赖项都是稳定的链接，尤其是在发布的时候。所以希望如果在某项依赖由于某种原因（配置文件或者代码等等不完整或者仓库被删了、该库链接的网络访问失败等）下载失败时，可以提供一个备用的链接，这一点在务端的发布中是非常有用的。</p>
<p data-v-270c8e4a data-v-270c8e4a>Fork：有时候第三方库的公开版有 bug，但是并没发布修复完的版本，很多人就会 fork 一个 bugfix 版本，这时候其实很多人会直接把依赖的 git 链接改成自己的 fork 链接，这样虽然能简单的解决问题，但是对于下面这种情况就会变得复杂：</p>
<p data-v-270c8e4a data-v-270c8e4a>比如当前我在开发主包 Package A，存在一个依赖链：A --> B --> C --> D，但是此时 D 出现了一个 bug，需要 fork 一个 bugfix 版本，如果按照上面的思路，就需要把依赖链中间的 B、C 都要 fork 一个 bugfix 版本，不然 B、C 还是下载的之前有 bug 的版本。</p>
<p data-v-270c8e4a data-v-270c8e4a>所以未来可能是在 Root Package （比如上例中的 A）中以下面这种方式实现：</p>
<div class="nuxt-content-highlight" data-v-270c8e4a data-v-270c8e4a><pre class="line-numbers language-text" data-v-270c8e4a data-v-270c8e4a><code data-v-270c8e4a data-v-270c8e4a>let package = Package(
    name: "app",
    dependencies: [
        // App depend on the libCore dependency.
        .package(url: "https://github.com/example/libCore.git", from: "1.0.0"),

        // Override the dependency with our fork until an important patch is merged upstream.
        .fork(package: "libCore", url: "https://github.com/myName/libCore.git", .branch("CVE-5715")),
    ],
    ...
)
</code></pre></div>
<p data-v-270c8e4a data-v-270c8e4a>这里含义是将 Package 依赖图里所有的 <code data-v-270c8e4a data-v-270c8e4a>libCore</code> 库换成下面的链接，不过需要需要注意的一点是这个特性只能在 Root Package 中使用，当作为 Package 发布出去被别的 Package 依赖时 SwiftPM 会直接报错，不然会因为设置多个 fork 而导致解析错误。</p>
<p data-v-270c8e4a data-v-270c8e4a>这两个优化点具体的讨论在 <a href="https://forums.swift.org/t/dependency-mirroring-and-forking/13902" rel="nofollow noopener noreferrer" target="_blank" data-v-270c8e4a data-v-270c8e4a>forums</a> 可以看到。到目前为止，应该还没有解决，在 master 的代码中也没看见对应的介绍。</p>
<h3 id="有条件的添加依赖" data-v-270c8e4a data-v-270c8e4a><a href="#%E6%9C%89%E6%9D%A1%E4%BB%B6%E7%9A%84%E6%B7%BB%E5%8A%A0%E4%BE%9D%E8%B5%96" aria-hidden="true" tabindex="-1" data-v-270c8e4a data-v-270c8e4a><span class="icon icon-link" data-v-270c8e4a data-v-270c8e4a></span></a>有条件的添加依赖</h3>
<p data-v-270c8e4a data-v-270c8e4a>举个例子，有些 <code data-v-270c8e4a data-v-270c8e4a>Dependency</code> 只希望在 <code data-v-270c8e4a data-v-270c8e4a>Linux</code> 环境下被依赖，其他环境下不被依赖。这个特性已经被提到了 <a href="https://bugs.swift.org/browse/SR-883" rel="nofollow noopener noreferrer" target="_blank" data-v-270c8e4a data-v-270c8e4a>这里</a>，希望用如下的这种方式：</p>
<div class="nuxt-content-highlight" data-v-270c8e4a data-v-270c8e4a><pre class="line-numbers language-text" data-v-270c8e4a data-v-270c8e4a><code data-v-270c8e4a data-v-270c8e4a>.package(url: "https://...", from: "1.0.0", when: .testing),
.package(url: "https://...", from: "2.0.0", when: .os(.linux),
</code></pre></div>
<p data-v-270c8e4a data-v-270c8e4a>但是 SwiftPM 的开发人员表示该特性需要再考虑下改如何实现，目前还是搁置暂议。</p>
<h3 id="添加资源文件" data-v-270c8e4a data-v-270c8e4a><a href="#%E6%B7%BB%E5%8A%A0%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6" aria-hidden="true" tabindex="-1" data-v-270c8e4a data-v-270c8e4a><span class="icon icon-link" data-v-270c8e4a data-v-270c8e4a></span></a>添加资源文件</h3>
<p data-v-270c8e4a data-v-270c8e4a>到目前为止集成到 Swift 语言里的 PackageDescription 里（即 Swift 5.1），还没有对应的机制又来存放资源文件，<code data-v-270c8e4a data-v-270c8e4a>Source</code> 文件夹里只能读取到代码文件。关于这点，之前有人提出过这个 <a href="https://bugs.swift.org/browse/SR-2866" rel="nofollow noopener noreferrer" target="_blank" data-v-270c8e4a data-v-270c8e4a>bug</a>，这个 <a href="https://forums.swift.org/t/swift-pm-bundles-and-resources/13981" rel="nofollow noopener noreferrer" target="_blank" data-v-270c8e4a data-v-270c8e4a>链接</a> 里也有相应的讨论。</p>
<p data-v-270c8e4a data-v-270c8e4a>这个问题公开版虽然没有解决，但是在 master 的源码中已经能看到对应的 API，不出意外的话，Swift 5.2 中就会把这个 API 集成进来。</p>
<div class="nuxt-content-highlight" data-v-270c8e4a data-v-270c8e4a><pre class="line-numbers language-text" data-v-270c8e4a data-v-270c8e4a><code data-v-270c8e4a data-v-270c8e4a>/// The explicit list of resource files in the target.
@available(_PackageDescription, introduced: 5.2)
public var resources: [Resource]? {
    get { _resources }
    set { _resources = newValue }
    }
private var _resources: [Resource]?
</code></pre></div>
<h3 id="在-package-编译时添加自定义编译脚本等" data-v-270c8e4a data-v-270c8e4a><a href="#%E5%9C%A8-package-%E7%BC%96%E8%AF%91%E6%97%B6%E6%B7%BB%E5%8A%A0%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BC%96%E8%AF%91%E8%84%9A%E6%9C%AC%E7%AD%89" aria-hidden="true" tabindex="-1" data-v-270c8e4a data-v-270c8e4a><span class="icon icon-link" data-v-270c8e4a data-v-270c8e4a></span></a>在 Package 编译时添加自定义编译脚本等</h3>
<p data-v-270c8e4a data-v-270c8e4a>很多时候我们想在 <code data-v-270c8e4a data-v-270c8e4a>Swift build</code> 时添加很多自定义的编译脚本，例如添加一些自定义的输入和输出，SwiftPM 的开发人员提了一个未来用于解决这个提案的方式，添加 <code data-v-270c8e4a data-v-270c8e4a>PackageExtentsion</code> ：</p>
<div class="nuxt-content-highlight" data-v-270c8e4a data-v-270c8e4a><pre class="line-numbers language-text" data-v-270c8e4a data-v-270c8e4a><code data-v-270c8e4a data-v-270c8e4a>extension Target {
    static func packageExtension(
        name: String,
        dependencies: [Dependency] = []
    ) -> Target
}

extension Product {
    static func packageExtension(
        name: String
    ) -> Product
}
</code></pre></div>
<p data-v-270c8e4a data-v-270c8e4a>具体的实现方式还需要很多步骤，感兴趣的可以看下这个 <a href="https://forums.swift.org/t/package-manager-extensible-build-tools/10900" rel="nofollow noopener noreferrer" target="_blank" data-v-270c8e4a data-v-270c8e4a>提案</a>。</p>
<h3 id="其他待优化项" data-v-270c8e4a data-v-270c8e4a><a href="#%E5%85%B6%E4%BB%96%E5%BE%85%E4%BC%98%E5%8C%96%E9%A1%B9" aria-hidden="true" tabindex="-1" data-v-270c8e4a data-v-270c8e4a><span class="icon icon-link" data-v-270c8e4a data-v-270c8e4a></span></a>其他待优化项</h3>
<ul data-v-270c8e4a data-v-270c8e4a>
<li data-v-270c8e4a data-v-270c8e4a>
<p data-v-270c8e4a data-v-270c8e4a>支持创建包时可以加入自定义模板 <a href="https://bugs.swift.org/browse/SR-7837" rel="nofollow noopener noreferrer" target="_blank" data-v-270c8e4a data-v-270c8e4a>SR-7837</a> 。</p>
</li>
<li data-v-270c8e4a data-v-270c8e4a>
<p data-v-270c8e4a data-v-270c8e4a>一句命令行直接打 tag 并发布到 git 源上。</p>
</li>
<li data-v-270c8e4a data-v-270c8e4a>
<p data-v-270c8e4a data-v-270c8e4a>性能测试：<a href="https://bugs.swift.org/browse/SR-1354" rel="nofollow noopener noreferrer" target="_blank" data-v-270c8e4a data-v-270c8e4a>SR-1354</a></p>
</li>
<li data-v-270c8e4a data-v-270c8e4a>
<p data-v-270c8e4a data-v-270c8e4a>一个 git 源上放多个 Package：<a href="https://bugs.swift.org/browse/SR-3951" rel="nofollow noopener noreferrer" target="_blank" data-v-270c8e4a data-v-270c8e4a>SR-3951</a></p>
</li>
<li data-v-270c8e4a data-v-270c8e4a>
<p data-v-270c8e4a data-v-270c8e4a><a href="https://github.com/apple/swift-package-manager/blob/master/Documentation/EvolutionIdeas.md" rel="nofollow noopener noreferrer" target="_blank" data-v-270c8e4a data-v-270c8e4a>等等</a></p>
</li>
</ul>
<h2 id="swiftpm-在-ios-平台的使用" data-v-270c8e4a data-v-270c8e4a><a href="#swiftpm-%E5%9C%A8-ios-%E5%B9%B3%E5%8F%B0%E7%9A%84%E4%BD%BF%E7%94%A8" aria-hidden="true" tabindex="-1" data-v-270c8e4a data-v-270c8e4a><span class="icon icon-link" data-v-270c8e4a data-v-270c8e4a></span></a>SwiftPM 在 iOS 平台的使用</h2>
<p data-v-270c8e4a data-v-270c8e4a>其实说 SPM 支持 iOS 等平台，个人觉得是有点问题的，因为这里只是 Xcode11 集成了 <code data-v-270c8e4a data-v-270c8e4a>libSwiftPM</code>，适配了 SPM 系统，从 SPM 本身的设计来看，并不能严格的说支持 iOS 等平台。而根据 github 上面的 <a href="https://github.com/apple/swift-package-manager/blob/master/Documentation/libSwiftPM.md" rel="nofollow noopener noreferrer" target="_blank" data-v-270c8e4a data-v-270c8e4a>文档</a> 显示，这个库最近还是会经常变动的。</p>
<p data-v-270c8e4a data-v-270c8e4a>对于 SwiftPM 在 iOS 平台的使用，并不是像 MacOS 平台这样通过配置文件实现，而是通过 Xcode 的官方插件进行集成。自己试了下，流程还是有点慢。</p>
<h2 id="swiftpm-对比-cocoapods-和-carthage" data-v-270c8e4a data-v-270c8e4a><a href="#swiftpm-%E5%AF%B9%E6%AF%94-cocoapods-%E5%92%8C-carthage" aria-hidden="true" tabindex="-1" data-v-270c8e4a data-v-270c8e4a><span class="icon icon-link" data-v-270c8e4a data-v-270c8e4a></span></a>SwiftPM 对比 Cocoapods 和 Carthage</h2>
<h3 id="cocoapod" data-v-270c8e4a data-v-270c8e4a><a href="#cocoapod" aria-hidden="true" tabindex="-1" data-v-270c8e4a data-v-270c8e4a><span class="icon icon-link" data-v-270c8e4a data-v-270c8e4a></span></a>Cocoapod</h3>
<p data-v-270c8e4a data-v-270c8e4a>最古老的的一种包管理工具，也是使用最广泛的工具，依赖放在各个源（master 或者 自己的源）上的 <code data-v-270c8e4a data-v-270c8e4a>podspec</code> 文件进行下载代码库，在本地生成一个 workspace 进行统一管理、添加依赖。</p>
<ul data-v-270c8e4a data-v-270c8e4a>
<li data-v-270c8e4a data-v-270c8e4a>
<p data-v-270c8e4a data-v-270c8e4a>自动化 / 侵入性高：一键配置和集成依赖 / 自动更改 Xcode.project 的配置</p>
</li>
<li data-v-270c8e4a data-v-270c8e4a>
<p data-v-270c8e4a data-v-270c8e4a>中心化：提供各个源管理仓库配置文件，所有更新仓库文件索引可能会很慢。</p>
</li>
<li data-v-270c8e4a data-v-270c8e4a>
<p data-v-270c8e4a data-v-270c8e4a>缓存：除了项目根目录的缓存之外，还有较完整的本地缓存体系，所以不同工程下载同一个库时会直接从本地拿。</p>
</li>
<li data-v-270c8e4a data-v-270c8e4a>
<p data-v-270c8e4a data-v-270c8e4a>生态环境：比较完善，大多数库都提供了 pod 的集成方式，各种文档和工具也比较多</p>
</li>
</ul>
<h3 id="carthage" data-v-270c8e4a data-v-270c8e4a><a href="#carthage" aria-hidden="true" tabindex="-1" data-v-270c8e4a data-v-270c8e4a><span class="icon icon-link" data-v-270c8e4a data-v-270c8e4a></span></a>Carthage</h3>
<ul data-v-270c8e4a data-v-270c8e4a>
<li data-v-270c8e4a data-v-270c8e4a>
<p data-v-270c8e4a data-v-270c8e4a>去中心化：没有统一管理的中心，所以没有更新中心服务器的文件索引这种耗时步骤</p>
</li>
<li data-v-270c8e4a data-v-270c8e4a>
<p data-v-270c8e4a data-v-270c8e4a>成本略高 / 侵入性低：Carthage 只会帮你把各个库下载到本地（默认会编译成静态库），具体的 Project 配置需要自己弄</p>
</li>
<li data-v-270c8e4a data-v-270c8e4a>
<p data-v-270c8e4a data-v-270c8e4a>生态环境：很差，很多库都没有提供这种依赖方式</p>
</li>
<li data-v-270c8e4a data-v-270c8e4a>
<p data-v-270c8e4a data-v-270c8e4a>缓存：只有项目根目录的缓存，所以不同项目对于同一个库需要重新下载</p>
</li>
</ul>
<h3 id="swiftpm" data-v-270c8e4a data-v-270c8e4a><a href="#swiftpm" aria-hidden="true" tabindex="-1" data-v-270c8e4a data-v-270c8e4a><span class="icon icon-link" data-v-270c8e4a data-v-270c8e4a></span></a>SwiftPM</h3>
<ul data-v-270c8e4a data-v-270c8e4a>
<li data-v-270c8e4a data-v-270c8e4a>去中心化：没有统一管理的中心，所以没有更新中心服务器的文件索引这种耗时步骤</li>
<li data-v-270c8e4a data-v-270c8e4a>自动化 / 侵入性高：默认情况下需要有一定的目录格式</li>
<li data-v-270c8e4a data-v-270c8e4a>生态环境：怎么说呢，不能说差，只能说不够成熟，还有很多待优化项，毕竟是<strong data-v-270c8e4a data-v-270c8e4a>官方开发，Xcode 自集成</strong></li>
<li data-v-270c8e4a data-v-270c8e4a>缓存：只有项目根目录的缓存，所以不同项目对于同一个库需要重新下载</li>
</ul>
<p data-v-270c8e4a data-v-270c8e4a>上面是这三个东西在 Swift 包管理上的对比，至于如何选择，个人觉得如果所有的库都支持这些管理方式，那当然是选有官方认证的 SwiftPM，而且它也是使用 Swift 语言编写的，对于看设计原理也比较方便点。</p>
<h2 id="引用" data-v-270c8e4a data-v-270c8e4a><a href="#%E5%BC%95%E7%94%A8" aria-hidden="true" tabindex="-1" data-v-270c8e4a data-v-270c8e4a><span class="icon icon-link" data-v-270c8e4a data-v-270c8e4a></span></a>引用</h2>
<ul data-v-270c8e4a data-v-270c8e4a>
<li data-v-270c8e4a data-v-270c8e4a><a href="https://stackoverflow.com/questions/39499281/what-is-the-difference-between-a-swift-package-and-a-module" rel="nofollow noopener noreferrer" target="_blank" data-v-270c8e4a data-v-270c8e4a>What is the difference between a Swift package and a module?</a></li>
<li data-v-270c8e4a data-v-270c8e4a><a href="https://github.com/apple/swift-package-manager" rel="nofollow noopener noreferrer" target="_blank" data-v-270c8e4a data-v-270c8e4a>swift-package-manager</a></li>
<li data-v-270c8e4a data-v-270c8e4a><a href="https://medium.com/@ntrupin/pods-carthage-and-spm-swifts-package-management-dilemma-7da4ec87a20c" rel="nofollow noopener noreferrer" target="_blank" data-v-270c8e4a data-v-270c8e4a>Pods, Carthage, and SPM: Swift’s Package Management Dilemma</a></li>
</ul></div></div> <div class="sidebar co-width-2" style="padding-left:12px;display:none" data-v-270c8e4a><div class="toc-fixed" data-v-270c8e4a><nav id="TableOfContents" data-v-270c8e4a><ul data-v-270c8e4a><li class="py-2" style="text-indent:8px" data-v-270c8e4a><a href="#swiftpm-是什么" data-v-270c8e4a> SwiftPM 是什么 </a></li><li class="ml-2 pb-2" style="text-indent:16px" data-v-270c8e4a><a href="#概念" data-v-270c8e4a> 概念 </a></li><li class="py-2" style="text-indent:8px" data-v-270c8e4a><a href="#swiftpm-的创建和使用" data-v-270c8e4a> SwiftPM 的创建和使用 </a></li><li class="ml-2 pb-2" style="text-indent:16px" data-v-270c8e4a><a href="#创建一个可执行的包" data-v-270c8e4a> 创建一个可执行的包 </a></li><li class="ml-2 pb-2" style="text-indent:16px" data-v-270c8e4a><a href="#添加依赖" data-v-270c8e4a> 添加依赖 </a></li><li class="ml-2 pb-2" style="text-indent:16px" data-v-270c8e4a><a href="#添加系统依赖包" data-v-270c8e4a> 添加系统依赖包 </a></li><li class="ml-2 pb-2" style="text-indent:16px" data-v-270c8e4a><a href="#采用-xcode-运行" data-v-270c8e4a> 采用 Xcode 运行 </a></li><li class="py-2" style="text-indent:8px" data-v-270c8e4a><a href="#解析-package" data-v-270c8e4a> 解析 Package </a></li><li class="ml-2 pb-2" style="text-indent:16px" data-v-270c8e4a><a href="#packagesupportedplatform" data-v-270c8e4a> Package.SupportedPlatform </a></li><li class="ml-2 pb-2" style="text-indent:16px" data-v-270c8e4a><a href="#packageproduct" data-v-270c8e4a> Package.Product </a></li><li class="ml-2 pb-2" style="text-indent:16px" data-v-270c8e4a><a href="#packagedependencies" data-v-270c8e4a> Package.Dependencies </a></li><li class="ml-2 pb-2" style="text-indent:16px" data-v-270c8e4a><a href="#packagetarget" data-v-270c8e4a> Package.Target </a></li><li class="py-2" style="text-indent:8px" data-v-270c8e4a><a href="#需要注意的小点" data-v-270c8e4a> 需要注意的小点 </a></li><li class="ml-2 pb-2" style="text-indent:16px" data-v-270c8e4a><a href="#通过预处理命令区分编译环境" data-v-270c8e4a> 通过预处理命令区分编译环境 </a></li><li class="ml-2 pb-2" style="text-indent:16px" data-v-270c8e4a><a href="#选择特定-swift-版本的-package" data-v-270c8e4a> 选择特定 Swift 版本的 Package </a></li><li class="ml-2 pb-2" style="text-indent:16px" data-v-270c8e4a><a href="#packageresolved" data-v-270c8e4a> Package.resolved </a></li><li class="ml-2 pb-2" style="text-indent:16px" data-v-270c8e4a><a href="#build-configuration" data-v-270c8e4a> Build Configuration </a></li><li class="ml-2 pb-2" style="text-indent:16px" data-v-270c8e4a><a href="#swift-package-vs-swift-module" data-v-270c8e4a> Swift Package VS Swift Module </a></li><li class="py-2" style="text-indent:8px" data-v-270c8e4a><a href="#swift-evolution-ideas" data-v-270c8e4a> Swift Evolution Ideas </a></li><li class="ml-2 pb-2" style="text-indent:16px" data-v-270c8e4a><a href="#mirror-and-fork-support" data-v-270c8e4a> Mirror and Fork Support </a></li><li class="ml-2 pb-2" style="text-indent:16px" data-v-270c8e4a><a href="#有条件的添加依赖" data-v-270c8e4a> 有条件的添加依赖 </a></li><li class="ml-2 pb-2" style="text-indent:16px" data-v-270c8e4a><a href="#添加资源文件" data-v-270c8e4a> 添加资源文件 </a></li><li class="ml-2 pb-2" style="text-indent:16px" data-v-270c8e4a><a href="#在-package-编译时添加自定义编译脚本等" data-v-270c8e4a> 在 Package 编译时添加自定义编译脚本等 </a></li><li class="ml-2 pb-2" style="text-indent:16px" data-v-270c8e4a><a href="#其他待优化项" data-v-270c8e4a> 其他待优化项 </a></li><li class="py-2" style="text-indent:8px" data-v-270c8e4a><a href="#swiftpm-在-ios-平台的使用" data-v-270c8e4a> SwiftPM 在 iOS 平台的使用 </a></li><li class="py-2" style="text-indent:8px" data-v-270c8e4a><a href="#swiftpm-对比-cocoapods-和-carthage" data-v-270c8e4a> SwiftPM 对比 Cocoapods 和 Carthage </a></li><li class="ml-2 pb-2" style="text-indent:16px" data-v-270c8e4a><a href="#cocoapod" data-v-270c8e4a> Cocoapod </a></li><li class="ml-2 pb-2" style="text-indent:16px" data-v-270c8e4a><a href="#carthage" data-v-270c8e4a> Carthage </a></li><li class="ml-2 pb-2" style="text-indent:16px" data-v-270c8e4a><a href="#swiftpm" data-v-270c8e4a> SwiftPM </a></li><li class="py-2" style="text-indent:8px" data-v-270c8e4a><a href="#引用" data-v-270c8e4a> 引用 </a></li></ul></nav> <a href="#" id="tap-to-top" data-v-270c8e4a><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="arrow-up" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="svg-inline--fa fa-arrow-up fa-w-14" data-v-270c8e4a data-v-270c8e4a><path fill="currentColor" d="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z" data-v-270c8e4a data-v-270c8e4a></path></svg></a></div></div></aside></article></section></div></div></main></div></div><script defer src="/_nuxt/static/1632404867/wiki/content/%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7-spm-introduce/state.js"></script><script src="/_nuxt/js/runtime.1632404838130.js" defer></script><script src="/_nuxt/js/pages/wiki.1632404838130.js" defer></script><script src="/_nuxt/js/pages/wiki/content/_slug.1632404838130.js" defer></script><script src="/_nuxt/js/commons/app.1632404838130.js" defer></script><script src="/_nuxt/js/vendors/app.1632404838130.js" defer></script><script src="/_nuxt/js/app.1632404838130.js" defer></script>
  </body>
</html>
